ﬂ
:D:\calidad\HousesPeru\HousesPeru\App_Start\BundleConfig.cs
	namespace 	

HousesPeru
 
{ 
public 

class 
BundleConfig 
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$str 7
)7 8
)8 9
;9 :
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str .
,. /
$str ,
), -
)- .
;. /
bundles 
. 
Add 
( 
new 
StyleBundle '
(' (
$str( 7
)7 8
.8 9
Include9 @
(@ A
$str /
,/ 0
$str *
,* +
$str -
)- .
). /
;/ 0
} 	
} 
}   Á
:D:\calidad\HousesPeru\HousesPeru\App_Start\FilterConfig.cs
	namespace 	

HousesPeru
 
{ 
public 

class 
FilterConfig 
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

  
HandleErrorAttribute

 0
(

0 1
)

1 2
)

2 3
;

3 4
} 	
} 
} ≈
9D:\calidad\HousesPeru\HousesPeru\App_Start\RouteConfig.cs
	namespace 	

HousesPeru
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 3
,3 4
action5 ;
=< =
$str> E
,E F
idG I
=J K
UrlParameterL X
.X Y
OptionalY a
}b c
) 
; 
} 	
} 
} ’
9D:\calidad\HousesPeru\HousesPeru\App_Start\UnityConfig.cs
	namespace 	

HousesPeru
 
{ 
public 

static 
class 
UnityConfig #
{ 
private 
static 
Lazy 
< 
IUnityContainer +
>+ ,
	container- 6
=7 8
new
 
Lazy 
< 
IUnityContainer "
>" #
(# $
($ %
)% &
=>' )
{
 
var 
	container 
= 
new !
UnityContainer" 0
(0 1
)1 2
;2 3
RegisterTypes 
( 
	container %
)% &
;& '
return 
	container 
; 
}
 
) 
; 
public 
static 
IUnityContainer %
	Container& /
=>0 2
	container3 <
.< =
Value= B
;B C
public'' 
static'' 
void'' 
RegisterTypes'' (
(''( )
IUnityContainer'') 8
	container''9 B
)''B C
{(( 	
	container.. 
... 
RegisterType.. "
<.." #
IUsuarioService..# 2
,..2 3
UsuarioService..4 B
>..B C
(..C D
)..D E
;..E F
	container// 
.// 
RegisterType// "
<//" #
IAuthService//# /
,/// 0
AuthService//1 <
>//< =
(//= >
)//> ?
;//? @
	container00 
.00 
RegisterType00 "
<00" #
ISessionService00# 2
,002 3
SessionService004 B
>00B C
(00C D
)00D E
;00E F
	container11 
.11 
RegisterType11 "
<11" #
ICloudinaryService11# 5
,115 6
CloudinaryService117 H
>11H I
(11I J
)11J K
;11K L
	container22 
.22 
RegisterType22 "
<22" #
IInmuebleService22# 3
,223 4
InmuebleService225 D
>22D E
(22E F
)22F G
;22G H
	container33 
.33 
RegisterType33 "
<33" #
IImageService33# 0
,330 1
ImagenService332 ?
>33? @
(33@ A
)33A B
;33B C
	container44 
.44 
RegisterType44 "
<44" #
IPlanService44# /
,44/ 0
PlanService441 <
>44< =
(44= >
)44> ?
;44? @
	container55 
.55 
RegisterType55 "
<55" #
IPublicacionService55# 6
,556 7
PublicacionService558 J
>55J K
(55K L
)55L M
;55M N
	container66 
.66 
RegisterType66 "
<66" #
IImageService66# 0
,660 1
ImagenService662 ?
>66? @
(66@ A
)66A B
;66B C
	container77 
.77 
RegisterType77 "
<77" #
IValidacionUsuario77# 5
,775 6
ValidacionUsuario777 H
>77H I
(77I J
)77J K
;77K L
	container88 
.88 
RegisterType88 "
<88" # 
IInmuebleTipoService88# 7
,887 8
InmuebleTipoService889 L
>88L M
(88M N
)88N O
;88O P
	container99 
.99 
RegisterType99 "
<99" #
ICiudadService99# 1
,991 2
CiudadService993 @
>99@ A
(99A B
)99B C
;99C D
	container:: 
.:: 
RegisterType:: "
<::" #
IValidacionInmueble::# 6
,::6 7
ValidacionInmueble::8 J
>::J K
(::K L
)::L M
;::M N
};; 	
}<< 
}== ∞
?D:\calidad\HousesPeru\HousesPeru\App_Start\UnityMvcActivator.cs
[ 
assembly 	
:	 

WebActivatorEx 
. %
PreApplicationStartMethod 3
(3 4
typeof4 :
(: ;

HousesPeru; E
.E F
UnityMvcActivatorF W
)W X
,X Y
nameofZ `
(` a

HousesPerua k
.k l
UnityMvcActivatorl }
.} ~
Start	~ É
)
É Ñ
)
Ñ Ö
]
Ö Ü
[ 
assembly 	
:	 

WebActivatorEx 
. %
ApplicationShutdownMethod 3
(3 4
typeof4 :
(: ;

HousesPeru; E
.E F
UnityMvcActivatorF W
)W X
,X Y
nameofZ `
(` a

HousesPerua k
.k l
UnityMvcActivatorl }
.} ~
Shutdown	~ Ü
)
Ü á
)
á à
]
à â
	namespace		 	

HousesPeru		
 
{

 
public 

static 
class 
UnityMvcActivator )
{ 
public 
static 
void 
Start  
(  !
)! "
{ 	
FilterProviders 
. 
	Providers %
.% &
Remove& ,
(, -
FilterProviders- <
.< =
	Providers= F
.F G
OfTypeG M
<M N)
FilterAttributeFilterProviderN k
>k l
(l m
)m n
.n o
Firsto t
(t u
)u v
)v w
;w x
FilterProviders 
. 
	Providers %
.% &
Add& )
() *
new* -.
"UnityFilterAttributeFilterProvider. P
(P Q
UnityConfigQ \
.\ ]
	Container] f
)f g
)g h
;h i
DependencyResolver 
. 
SetResolver *
(* +
new+ .#
UnityDependencyResolver/ F
(F G
UnityConfigG R
.R S
	ContainerS \
)\ ]
)] ^
;^ _
} 	
public!! 
static!! 
void!! 
Shutdown!! #
(!!# $
)!!$ %
{"" 	
UnityConfig## 
.## 
	Container## !
.##! "
Dispose##" )
(##) *
)##* +
;##+ ,
}$$ 	
}%% 
}&& ˙V
>D:\calidad\HousesPeru\HousesPeru\Controllers\HomeController.cs
	namespace 	

HousesPeru
 
. 
Controllers  
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
IUsuarioService (
UserServ) 1
;1 2
private 
readonly 
IAuthService %
autentication& 3
;3 4
private 
readonly 
ISessionService (
session) 0
;0 1
private 
readonly 
IValidacionUsuario +
val, /
;/ 0
private 
readonly 
IInmuebleService )
InmServ* 1
;1 2
private 
readonly 
IImageService &

ImagenServ' 1
;1 2
private 
readonly  
IInmuebleTipoService -
inmuebleTipo. :
;: ;
private 
readonly 
ICiudadService '
ciudadService( 5
;5 6
public 
HomeController 
( 
IUsuarioService -
UserServ. 6
,6 7
IAuthService8 D
autenticationE R
,R S
ISessionServiceS b
sessionc j
,j k
IValidacionUsuariol ~
val	 Ç
,
Ç É
IInmuebleService
Ñ î
InmServ
ï ú
,
ú ù
IImageService
û ´

ImagenServ
¨ ∂
,
∂ ∑"
IInmuebleTipoService
∏ Ã
inmuebleTipo
Õ Ÿ
,
Ÿ ⁄
ICiudadService
€ È
ciudadService
Í ˜
)
˜ ¯
{ 	
this 
. 
UserServ 
= 
UserServ $
;$ %
this 
. 
autentication 
=  
autentication! .
;. /
this 
. 
session 
= 
session "
;" #
this 
. 
val 
= 
val 
; 
this 
. 
InmServ 
= 
InmServ "
;" #
this 
. 

ImagenServ 
= 

ImagenServ (
;( )
this 
. 
inmuebleTipo 
= 
inmuebleTipo  ,
;, -
this   
.   
ciudadService   
=    
ciudadService  ! .
;  . /
}"" 	
public$$ 
ActionResult$$ 
Index$$ !
($$! "
)$$" #
{%% 	
var'' 
	inmuebles'' 
='' 
InmServ'' "
.''" #
GetInmubles''# .
(''. /
)''/ 0
;''0 1
var(( 
listImg(( 
=(( 
new(( 
List(( "
<((" #
Imagen((# )
>(() *
(((* +
)((+ ,
;((, -
foreach)) 
()) 
var)) 
inm)) 
in)) 
	inmuebles))  )
)))) *
{))+ ,
var** 
imagen** 
=** 

ImagenServ** '
.**' (#
GetImagenesByInmuebleId**( ?
(**? @
inm**@ C
.**C D

InmuebleId**D N
)**N O
;**O P
listImg++ 
.++ 
Add++ 
(++ 
imagen++ "
)++" #
;++# $
}-- 
ViewBag.. 
... 
	Inmuebles.. 
=.. 
	inmuebles..  )
;..) *
ViewBag// 
.// 
Imagenes// 
=// 
listImg// &
;//& '
ViewBag00 
.00 
TipoInmueble00  
=00! "
inmuebleTipo00# /
.00/ 0
getInmuebleTipos000 @
(00@ A
)00A B
;00B C
ViewBag11 
.11 
ciudad11 
=11 
ciudadService11 *
.11* +
GetCiudades11+ 6
(116 7
)117 8
;118 9
var33 
user33 
=33 
autentication33 $
.33$ %
GetLogedUser33% 1
(331 2
)332 3
;333 4
if44 
(44 
user44 
!=44 
null44 
)44 
{55 
ViewBag66 
.66 

UserLogged66 "
=66# $
user66% )
.66) *
TipoUsuario66* 5
;665 6
}77 
else88 
{99 
ViewBag:: 
.:: 

UserLogged:: "
=::# $
null::% )
;::) *
};; 
return<< 
View<< 
(<< 
)<< 
;<< 
}== 	
[?? 	
HttpGet??	 
]?? 
public@@ 
ActionResult@@ 
Registro@@ $
(@@$ %
)@@% &
{AA 	
returnBB 
ViewBB 
(BB 
)BB 
;BB 
}CC 	
[DD 	
HttpPostDD	 
]DD 
publicEE 
ActionResultEE 
RegistroEE $
(EE$ %
UsuarioViewModelEE% 5
userEE6 :
)EE: ;
{FF 	
valGG 
.GG 
validarUsuarioGG 
(GG 
userGG #
,GG# $

ModelStateGG% /
)GG/ 0
;GG0 1
ifHH 
(HH 

ModelStateHH 
.HH 
IsValidHH "
)HH" #
{II 
UserServJJ 
.JJ 

AddUsuarioJJ #
(JJ# $
userJJ$ (
)JJ( )
;JJ) *
returnKK 
RedirectToActionKK '
(KK' (
$strKK( /
,KK/ 0
$strKK1 7
)KK7 8
;KK8 9
}LL 
returnMM 
ViewMM 
(MM 
userMM 
)MM 
;MM 
}OO 	
[PP 	
HttpGetPP	 
]PP 
publicQQ 
ActionResultQQ 
LoginQQ !
(QQ! "
)QQ" #
{RR 	
returnSS 
ViewSS 
(SS 
)SS 
;SS 
}TT 	
[UU 	
HttpPostUU	 
]UU 
publicVV 
ActionResultVV 
LoginVV !
(VV! "
UsuarioVV" )
usuarioVV* 1
)VV1 2
{WW 	
ifYY 
(YY 
usuarioYY 
.YY 
EmailYY 
==YY  
$strYY! #
||YY$ &
usuarioYY' .
.YY. /
PasswordYY/ 7
==YY8 :
$strYY; =
)YY= >
{ZZ 
ViewBag\\ 
.\\ 
ShowModalLogin\\ &
=\\' (
true\\) -
;\\- .

ModelState]] 
.]] 
AddModelError]] (
(]]( )
$str]]) 1
,]]1 2
$str]]3 R
)]]R S
;]]S T
return^^ 
View^^ 
(^^ 
usuario^^ #
)^^# $
;^^$ %
}`` 
Usuarioaa 
useraa 
=aa 
UserServaa #
.aa# $(
GetUsuarioByEmailAndPasswordaa$ @
(aa@ A
usuarioaaA H
.aaH I
EmailaaI N
,aaN O
usuarioaaP W
.aaW X
PasswordaaX `
)aa` a
;aaa b
ifbb 
(bb 
userbb 
!=bb 
nullbb 
)bb 
{cc 
autenticationdd 
.dd 
Logindd #
(dd# $
userdd$ (
)dd( )
;dd) *
sessionee 
.ee 
GuardarSessionee &
(ee& '
useree' +
)ee+ ,
;ee, -
returngg 
RedirectToActiongg '
(gg' (
$strgg( /
,gg/ 0
$strgg1 7
)gg7 8
;gg8 9
}hh 
elseii 
{ii 
returnjj 
RedirectToActionjj '
(jj' (
$strjj( /
,jj/ 0
$strjj1 7
)jj7 8
;jj8 9
}kk 
}oo 	
publicpp 
ActionResultpp 
LogOutpp "
(pp" #
)pp# $
{pp% &
autenticationqq 
.qq 
Logoutqq  
(qq  !
)qq! "
;qq" #
sessionrr 
.rr 
LimpiarSessionrr "
(rr" #
)rr# $
;rr$ %
returnss 
RedirectToActionss #
(ss# $
$strss$ +
,ss+ ,
$strss, 2
)ss2 3
;ss3 4
}tt 	
publicuu 
booluu 
IsLoggeduu 
(uu 
)uu 
{uu  
ifvv 
(vv 
Sessionvv 
[vv 
$strvv #
]vv# $
!=vv% '
nullvv( ,
&&vv- /
Sessionvv0 7
[vv7 8
$strvv8 E
]vvE F
!=vvG I
nullvvJ N
)vvN O
returnww 
trueww 
;ww 
returnxx 
falsexx 
;xx 
}yy 	
[zz 	
HttpGetzz	 
]zz 
public{{ 
ActionResult{{ 
About{{ !
({{! "
){{" #
{|| 	
var}} 
user}} 
=}} 
autentication}} $
.}}$ %
GetLogedUser}}% 1
(}}1 2
)}}2 3
;}}3 4
if~~ 
(~~ 
user~~ 
!=~~ 
null~~ 
)~~ 
{ 
ViewBag
ÄÄ 
.
ÄÄ 

UserLogged
ÄÄ "
=
ÄÄ# $
user
ÄÄ% )
.
ÄÄ) *
TipoUsuario
ÄÄ* 5
;
ÄÄ5 6
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
ViewBag
ÑÑ 
.
ÑÑ 

UserLogged
ÑÑ "
=
ÑÑ# $
null
ÑÑ% )
;
ÑÑ) *
}
ÖÖ 
return
ÜÜ 
View
ÜÜ 
(
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 	
[
àà 	
HttpGet
àà	 
]
àà 
public
ââ 
ActionResult
ââ 
Contact
ââ #
(
ââ# $
)
ââ$ %
{
ää 	
var
ãã 
user
ãã 
=
ãã 
autentication
ãã $
.
ãã$ %
GetLogedUser
ãã% 1
(
ãã1 2
)
ãã2 3
;
ãã3 4
if
åå 
(
åå 
user
åå 
!=
åå 
null
åå 
)
åå 
{
çç 
ViewBag
éé 
.
éé 

UserLogged
éé "
=
éé# $
user
éé% )
.
éé) *
TipoUsuario
éé* 5
;
éé5 6
}
èè 
else
êê 
{
ëë 
ViewBag
íí 
.
íí 

UserLogged
íí "
=
íí# $
null
íí% )
;
íí) *
}
ìì 
return
îî 
View
îî 
(
îî 
)
îî 
;
îî 
}
ïï 	
}
øø 
}¿¿ Ñí
BD:\calidad\HousesPeru\HousesPeru\Controllers\InmuebleController.cs
	namespace 	

HousesPeru
 
. 
Controllers  
{ 
public 

class 
InmuebleController #
:$ %

Controller& 0
{ 
private 
readonly 
IAuthService %
AuthServ& .
;. /
private 
readonly 
IInmuebleService )
InmServ* 1
;1 2
private 
readonly 
IImageService &

ImagenServ' 1
;1 2
private 
readonly  
IInmuebleTipoService -
InmTipoServ. 9
;9 :
private 
readonly 
ICiudadService '

CiudadServ( 2
;2 3
private 
readonly 
IUsuarioService (
UsuarioServ) 4
;4 5
private 
readonly 
IPublicacionService ,

PublicServ- 7
;7 8
private 
readonly 
IPlanService %
PlanServ& .
;. /
private 
readonly 
IValidacionInmueble ,
valInm- 3
;3 4
public 
InmuebleController !
(! "
IAuthService" .
AuthServ/ 7
,7 8
IInmuebleService9 I
InmServJ Q
,Q R
IImageServiceS `

ImagenServa k
,k l!
IInmuebleTipoService	m Å
InmTipoServ
Ç ç
,
ç é
ICiudadService
è ù

CiudadServ
û ®
,
® ©
IUsuarioService
™ π
UsuarioServ
∫ ≈
,
≈ ∆!
IPublicacionService
« ⁄

PublicServ
€ Â
,
Â Ê
IPlanService
Á Û
PlanServ
Ù ¸
,
¸ ˝!
IValidacionInmueble
˛ ë
valInm
í ò
)
ò ô
{
ö õ
this 
. 
AuthServ 
= 
AuthServ $
;$ %
this 
. 
InmServ 
= 
InmServ "
;" #
this 
. 

ImagenServ 
= 

ImagenServ (
;( )
this 
. 
InmTipoServ 
= 
InmTipoServ *
;* +
this   
.   

CiudadServ   
=   

CiudadServ   (
;  ( )
this!! 
.!! 
UsuarioServ!! 
=!! 
UsuarioServ!! *
;!!* +
this"" 
."" 

PublicServ"" 
="" 

PublicServ"" (
;""( )
this## 
.## 
PlanServ## 
=## 
PlanServ## $
;##$ %
this$$ 
.$$ 
valInm$$ 
=$$ 
valInm$$  
;$$  !
}%% 	
['' 	
HttpGet''	 
]'' 
public(( 
ActionResult(( 
GetInmuebles(( (
(((( )
)(() *
{)) 	
var** 
user** 
=** 
AuthServ** 
.**  
GetLogedUser**  ,
(**, -
)**- .
;**. /
if,, 
(,, 
user,, 
!=,, 
null,, 
),, 
{-- 
if.. 
(.. 
user.. 
... 
TipoUsuario.. $
==..% '
$str..( 7
)..7 8
{..9 :
ViewBag// 
.// 

UserLogged// &
=//' (
user//) -
.//- .
TipoUsuario//. 9
;//9 :
ViewBag00 
.00 
Usuarios00 $
=00% &
UsuarioServ00' 2
.002 3
GetAllUsers003 >
(00> ?
)00? @
;00@ A
ViewBag11 
.11 
	Inmuebles11 %
=11& '
InmServ11( /
.11/ 0
GetInmubles110 ;
(11; <
)11< =
;11= >
ViewBag22 
.22 
TipoInmueble22 (
=22) *
InmTipoServ22+ 6
.226 7
getInmuebleTipos227 G
(22G H
)22H I
;22I J
ViewBag33 
.33 
Ciudad33 "
=33# $

CiudadServ33% /
.33/ 0
GetCiudades330 ;
(33; <
)33< =
;33= >
ViewBag44 
.44 
Plan44  
=44! "
PlanServ44# +
.44+ ,
getPlans44, 4
(444 5
)445 6
;446 7
}66 
if77 
(77 
user77 
.77 
TipoUsuario77 $
==77% '
$str77( 1
)771 2
{88 
ViewBag99 
.99 

UserLogged99 &
=99' (
user99) -
.99- .
TipoUsuario99. 9
;999 :
ViewBag:: 
.:: 
Usuarios:: $
=::% &
UsuarioServ::' 2
.::2 3
GetUsuarios::3 >
(::> ?
)::? @
;::@ A
ViewBag;; 
.;; 
	Inmuebles;; %
=;;& '
InmServ;;( /
.;;/ 0!
GetInmueblesByUsuario;;0 E
(;;E F
user;;F J
.;;J K
	UsuarioId;;K T
);;T U
;;;U V
ViewBag<< 
.<< 
TipoInmueble<< (
=<<) *
InmTipoServ<<+ 6
.<<6 7
getInmuebleTipos<<7 G
(<<G H
)<<H I
;<<I J
ViewBag== 
.== 
Ciudad== "
===# $

CiudadServ==% /
.==/ 0
GetCiudades==0 ;
(==; <
)==< =
;=== >
ViewBag>> 
.>> 
Plan>>  
=>>! "
PlanServ>># +
.>>+ ,
getPlans>>, 4
(>>4 5
)>>5 6
;>>6 7
}?? 
if@@ 
(@@ 
user@@ 
.@@ 
TipoUsuario@@ $
==@@% '
$str@@( 0
)@@0 1
{AA 
ViewBagBB 
.BB 

UserLoggedBB &
=BB' (
userBB) -
.BB- .
TipoUsuarioBB. 9
;BB9 :
ViewBagCC 
.CC 
UsuariosCC $
=CC% &
UsuarioServCC' 2
.CC2 3
GetUsuariosCC3 >
(CC> ?
)CC? @
;CC@ A
ViewBagDD 
.DD 
	InmueblesDD %
=DD& '
InmServDD( /
.DD/ 0!
GetInmueblesByUsuarioDD0 E
(DDE F
userDDF J
.DDJ K
	UsuarioIdDDK T
)DDT U
;DDU V
ViewBagEE 
.EE 
TipoInmuebleEE (
=EE) *
InmTipoServEE+ 6
.EE6 7
getInmuebleTiposEE7 G
(EEG H
)EEH I
;EEI J
ViewBagFF 
.FF 
CiudadFF "
=FF# $

CiudadServFF% /
.FF/ 0
GetCiudadesFF0 ;
(FF; <
)FF< =
;FF= >
ViewBagGG 
.GG 
PlanGG  
=GG! "
PlanServGG# +
.GG+ ,
getPlansGG, 4
(GG4 5
)GG5 6
;GG6 7
}HH 
}JJ 
elseKK 
{LL 
ViewBagMM 
.MM 

UserLoggedMM "
=MM# $
nullMM% )
;MM) *
}NN 
returnOO 
ViewOO 
(OO 
)OO 
;OO 
}PP 	
[QQ 	
HttpGetQQ	 
]QQ 
publicRR 
ActionResultRR 
BuscarRR "
(RR" #
stringRR# )
EstadoRR* 0
)RR0 1
{RR2 3
varSS 
userSS 
=SS 
AuthServSS 
.SS  
GetLogedUserSS  ,
(SS, -
)SS- .
;SS. /
ViewBagTT 
.TT 
	InmueblesTT 
=TT 
InmServTT  '
.TT' (
BuscarInmuebleTT( 6
(TT6 7
$numTT7 8
,TT8 9
$numTT: ;
,TT; <
EstadoTT= C
)TTC D
;TTD E
ViewBagUU 
.UU 
ImagenesUU 
=UU 

ImagenServUU )
.UU) *
GetImagenesUU* 5
(UU5 6
)UU6 7
;UU7 8
ViewBagVV 
.VV 
TipoInmuebleVV  
=VV! "
InmTipoServVV# .
.VV. /
getInmuebleTiposVV/ ?
(VV? @
)VV@ A
;VVA B
ViewBagWW 
.WW 
ciudadWW 
=WW 

CiudadServWW '
.WW' (
GetCiudadesWW( 3
(WW3 4
)WW4 5
;WW5 6
ifXX 
(XX 
userXX 
!=XX 
nullXX 
)XX 
{YY 
ViewBagZZ 
.ZZ 

UserLoggedZZ "
=ZZ# $
userZZ% )
.ZZ) *
TipoUsuarioZZ* 5
;ZZ5 6
}[[ 
else\\ 
{]] 
ViewBag^^ 
.^^ 

UserLogged^^ "
=^^# $
null^^% )
;^^) *
}__ 
return`` 
View`` 
(`` 
)`` 
;`` 
}aa 	
[bb 	
HttpPostbb	 
]bb 
publiccc 
ActionResultcc 
Buscarcc "
(cc" #
intcc# &
ciudadcc' -
,cc- .
intcc/ 2
TipoInmueblecc3 ?
,cc? @
stringccA G
EstadoccH N
)ccN O
{ccP Q
vardd 
userdd 
=dd 
AuthServdd 
.dd  
GetLogedUserdd  ,
(dd, -
)dd- .
;dd. /
varff 
	inmueblesff 
=ff 
InmServff #
.ff# $
BuscarInmuebleff$ 2
(ff2 3
ciudadff3 9
,ff9 :
TipoInmuebleff; G
,ffG H
EstadoffI O
)ffO P
;ffQ R
vargg 
listImggg 
=gg 
newgg 
Listgg "
<gg" #
Imagengg# )
>gg) *
(gg* +
)gg+ ,
;gg, -
foreachhh 
(hh 
varhh 
inmhh 
inhh 
	inmuebleshh  )
)hh) *
{ii 
varjj 
imagenjj 
=jj 

ImagenServjj '
.jj' (#
GetImagenesByInmuebleIdjj( ?
(jj? @
inmjj@ C
.jjC D

InmuebleIdjjD N
)jjN O
;jjO P
listImgkk 
.kk 
Addkk 
(kk 
imagenkk "
)kk" #
;kk# $
}mm 
ViewBagpp 
.pp 
	Inmueblespp 
=pp 
	inmueblespp '
;pp' (
ViewBagqq 
.qq 
Imagenesqq 
=qq 
listImgqq &
;qq& '
ViewBagrr 
.rr 
TipoInmueblerr  
=rr! "
InmTipoServrr# .
.rr. /
getInmuebleTiposrr/ ?
(rr? @
)rr@ A
;rrA B
ViewBagss 
.ss 
ciudadss 
=ss 

CiudadServss '
.ss' (
GetCiudadesss( 3
(ss3 4
)ss4 5
;ss5 6
iftt 
(tt 
usertt 
!=tt 
nulltt 
)tt 
{uu 
ViewBagvv 
.vv 

UserLoggedvv "
=vv# $
uservv% )
.vv) *
TipoUsuariovv* 5
;vv5 6
}ww 
elsexx 
{yy 
ViewBagzz 
.zz 

UserLoggedzz "
=zz# $
nullzz% )
;zz) *
}{{ 
return|| 
View|| 
(|| 
)|| 
;|| 
}}} 	
[ 	
HttpGet	 
] 
public
ÄÄ 
ActionResult
ÄÄ 
Inmueble
ÄÄ $
(
ÄÄ$ %
int
ÄÄ% (
id
ÄÄ) +
)
ÄÄ+ ,
{
ÅÅ 	
var
ÇÇ 
user
ÇÇ 
=
ÇÇ 
AuthServ
ÇÇ 
.
ÇÇ  
GetLogedUser
ÇÇ  ,
(
ÇÇ, -
)
ÇÇ- .
;
ÇÇ. /
var
ÉÉ 
inmueble
ÉÉ 
=
ÉÉ 
InmServ
ÉÉ !
.
ÉÉ! "
GetInmuebleById
ÉÉ" 1
(
ÉÉ1 2
id
ÉÉ2 4
)
ÉÉ4 5
;
ÉÉ5 6
ViewBag
ÖÖ 
.
ÖÖ 
Inmueble
ÖÖ 
=
ÖÖ 
inmueble
ÖÖ &
;
ÖÖ& '
ViewBag
ÜÜ 
.
ÜÜ 
InmuebleTipo
ÜÜ  
=
ÜÜ! "
InmTipoServ
ÜÜ# .
.
ÜÜ. /
getInmuebleTipos
ÜÜ/ ?
(
ÜÜ? @
)
ÜÜ@ A
;
ÜÜA B
ViewBag
áá 
.
áá 
Ciudades
áá 
=
áá 

CiudadServ
áá )
.
áá) *
GetCiudades
áá* 5
(
áá5 6
)
áá6 7
;
áá7 8
ViewBag
àà 
.
àà 
Imagen
àà 
=
àà 

ImagenServ
àà '
.
àà' ((
GetAllImagenesByInmuebleID
àà( B
(
ààB C
inmueble
ààC K
.
ààK L

InmuebleId
ààL V
)
ààV W
;
ààW X
if
ââ 
(
ââ 
user
ââ 
!=
ââ 
null
ââ 
)
ââ 
{
ää 
ViewBag
ãã 
.
ãã 

UserLogged
ãã "
=
ãã# $
user
ãã% )
.
ãã) *
TipoUsuario
ãã* 5
;
ãã5 6
}
åå 
else
çç 
{
éé 
ViewBag
èè 
.
èè 

UserLogged
èè "
=
èè# $
null
èè% )
;
èè) *
}
êê 
return
ëë 
View
ëë 
(
ëë 
)
ëë 
;
ëë 
}
íí 	
[
îî 	
HttpPost
îî	 
]
îî 
public
ïï 
ActionResult
ïï 
Inmueble
ïï $
(
ïï$ %
Inmueble
ïï% -
inmueble
ïï. 6
,
ïï6 7
int
ïï8 ;
IdInmuebleTip
ïï< I
,
ïïI J
int
ïïK N

IdCiudades
ïïO Y
,
ïïY Z
List
ïï[ _
<
ïï_ ` 
HttpPostedFileBase
ïï` r
>
ïïr s
Imagen
ïït z
)
ïïz {
{
ïï| }
var
óó 
user
óó 
=
óó 
AuthServ
óó 
.
óó  
GetLogedUser
óó  ,
(
óó, -
)
óó- .
;
óó. /
if
òò 
(
òò 
user
òò 
!=
òò 
null
òò 
)
òò 
{
ôô 
ViewBag
öö 
.
öö 

UserLogged
öö "
=
öö# $
user
öö% )
.
öö) *
TipoUsuario
öö* 5
;
öö5 6
inmueble
úú 
.
úú 
	UsuarioId
úú "
=
úú# $
user
úú% )
.
úú) *
	UsuarioId
úú* 3
;
úú3 4
inmueble
ùù 
.
ùù 
InmuebleTipoId
ùù '
=
ùù( )
IdInmuebleTip
ùù* 7
;
ùù7 8
inmueble
ûû 
.
ûû 
CiudadId
ûû !
=
ûû" #

IdCiudades
ûû$ .
;
ûû. /
valInm
†† 
.
†† 
validarInmueble
†† &
(
††& '
inmueble
††' /
,
††/ 0

ModelState
††1 ;
)
††; <
;
††< =
if
°° 
(
°° 

ModelState
°° 
.
°° 
IsValid
°° &
)
°°& '
{
¢¢ 
InmServ
§§ 
.
§§ 
EditarInmueble
§§ *
(
§§* +
inmueble
§§+ 3
.
§§3 4

InmuebleId
§§4 >
,
§§> ?
inmueble
§§@ H
)
§§H I
;
§§I J

ImagenServ
•• 
.
•• 
	AddImagen
•• (
(
••( )
Imagen
••) /
,
••/ 0
inmueble
••1 9
.
••9 :

InmuebleId
••: D
)
••D E
;
••E F
return
¶¶ 
RedirectToAction
¶¶ +
(
¶¶+ ,
$str
¶¶, 3
,
¶¶3 4
$str
¶¶5 ;
)
¶¶; <
;
¶¶< =
}
®® 
ViewBag
©© 
.
©© 
Inmueble
©©  
=
©©  !
inmueble
©©" *
;
©©* +
ViewBag
™™ 
.
™™ 
InmuebleTipo
™™ $
=
™™% &
InmTipoServ
™™' 2
.
™™2 3
getInmuebleTipos
™™3 C
(
™™C D
)
™™D E
;
™™E F
ViewBag
´´ 
.
´´ 
Ciudades
´´  
=
´´! "

CiudadServ
´´# -
.
´´- .
GetCiudades
´´. 9
(
´´9 :
)
´´: ;
;
´´; <
ViewBag
¨¨ 
.
¨¨ 
Imagen
¨¨ 
=
¨¨  

ImagenServ
¨¨! +
.
¨¨+ ,(
GetAllImagenesByInmuebleID
¨¨, F
(
¨¨F G
inmueble
¨¨G O
.
¨¨O P

InmuebleId
¨¨P Z
)
¨¨Z [
;
¨¨[ \
return
≠≠ 
View
≠≠ 
(
≠≠ 
inmueble
≠≠ $
)
≠≠$ %
;
≠≠% &
}
ÆÆ 
else
ØØ 
{
∞∞ 
ViewBag
±± 
.
±± 

UserLogged
±± "
=
±±# $
null
±±% )
;
±±) *
return
≤≤ 
RedirectToAction
≤≤ '
(
≤≤' (
$str
≤≤( /
,
≤≤/ 0
$str
≤≤1 7
)
≤≤7 8
;
≤≤8 9
}
≥≥ 
}
µµ 	
[
∂∂ 	
HttpPost
∂∂	 
]
∂∂ 
public
∑∑ 

JsonResult
∑∑ 
DelImg
∑∑  
(
∑∑  !
int
∑∑! $
idImag
∑∑% +
)
∑∑+ ,
{
∑∑- .

ImagenServ
ππ 
.
ππ 
DelImg
ππ 
(
ππ 
idImag
ππ $
)
ππ$ %
;
ππ% &
return
∫∫ 
Json
∫∫ 
(
∫∫ 
true
∫∫ 
)
∫∫ 
;
∫∫ 
}
ºº 	
[
ΩΩ 	
HttpGet
ΩΩ	 
]
ΩΩ 
public
ææ 

JsonResult
ææ 
	InmLayout
ææ #
(
ææ# $
)
ææ$ %
{
ææ& '
var
øø 
data
øø 
=
øø 
new
øø 
List
øø 
<
øø  

JsonImagen
øø  *
>
øø* +
(
øø+ ,
)
øø, -
;
øø- .
data
¿¿ 
=
¿¿ 

ImagenServ
¿¿ 
.
¿¿ 

getAllImgs
¿¿ '
(
¿¿' (
)
¿¿( )
;
¿¿) *
return
¬¬ 
Json
¬¬ 
(
¬¬ 
data
¬¬ 
,
¬¬ !
JsonRequestBehavior
¬¬ 1
.
¬¬1 2
AllowGet
¬¬2 :
)
¬¬; <
;
¬¬< =
}
√√ 	
}
ƒƒ 
}≈≈ Â#
>D:\calidad\HousesPeru\HousesPeru\Controllers\PlanController.cs
	namespace 	

HousesPeru
 
. 
Controllers  
{		 
public

 

class

 
PlanController

 
:

  !

Controller

" ,
{ 
private 
readonly 
IAuthService %
autentication& 3
;3 4
private 
readonly 
IPlanService %
PlanServ& .
;. /
private 
readonly 
IUsuarioService (
userServ) 1
;1 2
public 
PlanController 
( 
IAuthService *
autentication+ 8
,8 9
IPlanService: F
PlanServG O
,O P
IUsuarioServiceQ `
userServa i
)i j
{k l
this 
. 
autentication 
=  
autentication! .
;. /
this 
. 
PlanServ 
= 
PlanServ $
;$ %
this 
. 
userServ 
= 
userServ $
;$ %
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpGet	 
] 
public 
ActionResult 
	GetPlanes %
(% &
)& '
{ 	
var 
user 
= 
autentication $
.$ %
GetLogedUser% 1
(1 2
)2 3
;3 4
if 
( 
user 
!= 
null 
) 
{ 
ViewBag   
.   

UserLogged   "
=  # $
user  % )
.  ) *
TipoUsuario  * 5
;  5 6
ViewBag!! 
.!! 

PlanActual!! "
=!!# $
PlanServ!!% -
.!!- .
getPlanById!!. 9
(!!9 :
user!!: >
.!!> ?
PlanId!!? E
)!!E F
;!!F G
ViewBag"" 
."" 
User"" 
="" 
userServ"" '
.""' (
GetUsuarioByID""( 6
(""6 7
user""7 ;
.""; <
	UsuarioId""< E
)""E F
;""F G
}## 
else$$ 
{%% 
ViewBag&& 
.&& 

UserLogged&& "
=&&# $
null&&% )
;&&) *
ViewBag'' 
.'' 

PlanActual'' "
=''# $
null''% )
;'') *
ViewBag(( 
.(( 
User(( 
=(( 
null(( #
;((# $
})) 
return** 
View** 
(** 
)** 
;** 
},, 	
[-- 	
HttpPost--	 
]-- 
public.. 
ActionResult.. 

PostPlanes.. &
(..& '
int..' *
IdPlan..+ 1
)..1 2
{// 	
var00 
user00 
=00 
autentication00 $
.00$ %
GetLogedUser00% 1
(001 2
)002 3
;003 4
if11 
(11 
user11 
!=11 
null11 
)11 
{22 
ViewBag33 
.33 

UserLogged33 "
=33# $
user33% )
.33) *
TipoUsuario33* 5
;335 6
ViewBag44 
.44 

PlanActual44 "
=44# $
PlanServ44% -
.44- .
getPlanById44. 9
(449 :
user44: >
.44> ?
PlanId44? E
)44E F
;44F G
ViewBag55 
.55 
User55 
=55 
userServ55 '
.55' (
GetUsuarioByID55( 6
(556 7
user557 ;
.55; <
	UsuarioId55< E
)55E F
;55F G
}66 
else77 
{88 
ViewBag99 
.99 

UserLogged99 "
=99# $
null99% )
;99) *
ViewBag:: 
.:: 

PlanActual:: "
=::# $
null::% )
;::) *
ViewBag;; 
.;; 
User;; 
=;; 
null;; #
;;;# $
}<< 
return== 
View== 
(== 
)== 
;== 
}?? 	
}@@ 
}AA ƒf
ED:\calidad\HousesPeru\HousesPeru\Controllers\PublicacionController.cs
	namespace 	

HousesPeru
 
. 
Controllers  
{ 
public 

class !
PublicacionController &
:' (

Controller) 3
{ 
private 
readonly 
IAuthService %
auth& *
;* +
private 
readonly 
IPlanService %
PlanServ& .
;. /
private 
readonly  
IInmuebleTipoService -

InmTipServ. 8
;8 9
private 
readonly 
ICiudadService '
CiudServ( 0
;0 1
private 
readonly 
ICloudinaryService +

Cloudinary, 6
;6 7
private 
readonly 
IInmuebleService )
inmServ* 1
;1 2
private 
readonly 
IImageService &

ImagenServ' 1
;1 2
private 
readonly 
IPublicacionService ,

publicServ- 7
;7 8
private 
readonly 
IValidacionInmueble ,
valInm- 3
;3 4
public !
PublicacionController $
($ %
IAuthService% 1
auth2 6
,6 7
IPlanService8 D
PlanServE M
,M N 
IInmuebleTipoServiceO c

InmTipServd n
,n o
ICiudadServicep ~
CiudServ	 á
,
á à 
ICloudinaryService
â õ

Cloudinary
ú ¶
,
¶ ß
IInmuebleService
® ∏
inmServ
π ¿
,
¿ ¡
IImageService
¬ œ

ImagenServ
– ⁄
,
⁄ €!
IPublicacionService
‹ Ô

publicServ
 ˙
,
˙ ˚!
IValidacionInmueble
¸ è
valInm
ê ñ
)
ñ ó
{ 	
this 
. 
auth 
= 
auth 
; 
this 
. 
PlanServ 
= 
PlanServ $
;$ %
this 
. 

InmTipServ 
= 

InmTipServ (
;( )
this 
. 
CiudServ 
= 
CiudServ $
;$ %
this   
.   

Cloudinary   
=   

Cloudinary   (
;  ( )
this!! 
.!! 
inmServ!! 
=!! 
inmServ!! "
;!!" #
this"" 
."" 

ImagenServ"" 
="" 

ImagenServ"" (
;""( )
this## 
.## 

publicServ## 
=## 

publicServ## (
;##( )
this$$ 
.$$ 
valInm$$ 
=$$ 
valInm$$  
;$$  !
}%% 	
public&& 
ActionResult&& 
Index&& !
(&&! "
)&&" #
{'' 	
return(( 
View(( 
((( 
)(( 
;(( 
})) 	
[** 	
HttpGet**	 
]** 
public++ 
ActionResult++ 
AddPublicacion++ *
(++* +
)+++ ,
{++- .
var.. 
user.. 
=.. 
auth.. 
... 
GetLogedUser.. '
(..' (
)..( )
;..) *
if11 
(11 
user11 
!=11 
null11 
)11 
{22 
ViewBag33 
.33 
Plans33 
=33 
PlanServ33  (
.33( )
getPlans33) 1
(331 2
)332 3
;333 4
ViewBag44 
.44 
InmuebleTipo44 $
=44% &

InmTipServ44' 1
.441 2
getInmuebleTipos442 B
(44B C
)44C D
;44D E
ViewBag55 
.55 
Ciudades55  
=55! "
CiudServ55# +
.55+ ,
GetCiudades55, 7
(557 8
)558 9
;559 :
ViewBag66 
.66 

UserLogged66 "
=66# $
user66% )
.66) *
TipoUsuario66* 5
;665 6
return77 
View77 
(77 
new77 
Inmueble77  (
(77( )
)77) *
)77* +
;77+ ,
}88 
else99 
{:: 
ViewBag;; 
.;; 
Plans;; 
=;; 
null;;  $
;;;$ %
ViewBag<< 
.<< 
InmuebleTipo<< $
=<<% &
null<<' +
;<<+ ,
ViewBag== 
.== 
Ciudades==  
===! "
null==# '
;==' (
ViewBag>> 
.>> 

UserLogged>> "
=>># $
null>>% )
;>>) *
return?? 
RedirectToAction?? '
(??' (
$str??( /
,??/ 0
$str??0 6
)??6 7
;??7 8
}@@ 
}CC 	
[DD 	
HttpPostDD	 
]DD 
publicEE 
ActionResultEE 
AddPublicacionEE *
(EE* +
InmuebleEE+ 3
inmuebleEE4 <
,EE< =
intEE> A
IdInmuebleTipEEB O
,EEO P
intEEQ T

IdCiudadesEEU _
,EE_ `
ListEEa e
<EEe f
HttpPostedFileBaseEEf x
>EEx y
Imagen	EEz Ä
)
EEÄ Å
{FF 	
varHH 
userHH 
=HH 
authHH 
.HH 
GetLogedUserHH (
(HH( )
)HH) *
;HH* +
ifII 
(II 
userII 
!=II 
nullII 
)II 
{JJ 
ViewBagKK 
.KK 

UserLoggedKK "
=KK# $
userKK% )
.KK) *
TipoUsuarioKK* 5
;KK5 6
inmuebleMM 
.MM 
	UsuarioIdMM "
=MM# $
userMM% )
.MM) *
	UsuarioIdMM* 3
;MM3 4
inmuebleNN 
.NN 
InmuebleTipoIdNN '
=NN( )
IdInmuebleTipNN* 7
;NN7 8
inmuebleOO 
.OO 
CiudadIdOO !
=OO" #

IdCiudadesOO$ .
;OO. /
inmueblePP 
.PP 
FechaPublicPP $
=PP% &
DateTimePP' /
.PP/ 0
NowPP0 3
;PP3 4
valInmQQ 
.QQ 
validarInmuebleQQ &
(QQ& '
inmuebleQQ' /
,QQ/ 0

ModelStateQQ1 ;
)QQ; <
;QQ< =
intRR 
tempRR 
=RR 
$numRR 
;RR 
foreachSS 
(SS 
varSS 
xdSS 
inSS  "
ImagenSS# )
)SS) *
{TT 
ifUU 
(UU 
xdUU 
!=UU 
nullUU "
)UU" #
{VV 
tempWW 
++WW 
;WW 
}YY 
}ZZ 
if[[ 
([[ 
temp[[ 
==[[ 
$num[[ 
)[[ 
{\\ 

ModelState]] 
.]] 
AddModelError]] ,
(]], -
$str]]- 7
,]]7 8
$str]]9 S
)]]S T
;]]T U
}^^ 
if`` 
(`` 

ModelState`` 
.`` 
IsValid`` &
)``& '
{aa 
inmServcc 
.cc 
AddInmueblecc '
(cc' (
inmueblecc( 0
)cc0 1
;cc1 2

ImagenServdd 
.dd 
	AddImagendd (
(dd( )
Imagendd) /
,dd/ 0
inmuebledd1 9
.dd9 :

InmuebleIddd: D
)ddD E
;ddE F
returnee 
RedirectToActionee +
(ee+ ,
$stree, 3
,ee3 4
$stree5 ;
)ee; <
;ee< =
}gg 
ViewBaghh 
.hh 
Planshh 
=hh 
PlanServhh  (
.hh( )
getPlanshh) 1
(hh1 2
)hh2 3
;hh3 4
ViewBagii 
.ii 
InmuebleTipoii $
=ii% &

InmTipServii' 1
.ii1 2
getInmuebleTiposii2 B
(iiB C
)iiC D
;iiD E
ViewBagjj 
.jj 
Ciudadesjj  
=jj! "
CiudServjj# +
.jj+ ,
GetCiudadesjj, 7
(jj7 8
)jj8 9
;jj9 :
ViewBagkk 
.kk 
Inmueblekk  
=kk! "
inmueblekk# +
;kk+ ,
ifmm 
(mm 
inmueblemm 
.mm 
Monedamm #
==mm$ &
$strmm' *
)mm* +
{nn 
inmuebleoo 
.oo 
Monedaoo #
=oo$ %
$stroo& 9
;oo9 :
}pp 
ViewBagqq 
.qq 
InmuebleTipoSelectqq *
=qq+ ,
IdInmuebleTipqq- :
;qq: ;
ViewBagrr 
.rr 
CiudadesSelectrr &
=rr' (

IdCiudadesrr) 3
;rr3 4
returnss 
Viewss 
(ss 
userss  
)ss  !
;ss! "
}tt 
elseuu 
{vv 
ViewBagww 
.ww 

UserLoggedww "
=ww# $
nullww% )
;ww) *
returnxx 
RedirectToActionxx '
(xx' (
$strxx( /
,xx/ 0
$strxx1 7
)xx7 8
;xx8 9
}yy 
}|| 	
[~~ 	
HttpGet~~	 
]~~ 
public 
ActionResult 
GetInmuebleByID +
(+ ,
int, /

IdInmueble0 :
): ;
{< =
var
ÄÄ 
user
ÄÄ 
=
ÄÄ 
auth
ÄÄ 
.
ÄÄ 
GetLogedUser
ÄÄ (
(
ÄÄ( )
)
ÄÄ) *
;
ÄÄ* +
if
ÅÅ 
(
ÅÅ 
user
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
ViewBag
ÉÉ 
.
ÉÉ 

UserLogged
ÉÉ "
=
ÉÉ# $
user
ÉÉ% )
.
ÉÉ) *
TipoUsuario
ÉÉ* 5
;
ÉÉ5 6
}
ÑÑ 
else
ÖÖ 
{
ÖÖ 
ViewBag
ÜÜ 
.
ÜÜ 

UserLogged
ÜÜ "
=
ÜÜ# $
null
ÜÜ% )
;
ÜÜ) *
}
áá 
var
ââ 
inmueble
ââ 
=
ââ 
inmServ
ââ "
.
ââ" #
GetInmuebleById
ââ# 2
(
ââ2 3

IdInmueble
ââ3 =
)
ââ= >
;
ââ> ?
var
ää 
	inmuebles
ää 
=
ää 
inmServ
ää #
.
ää# $
GetInmubles
ää$ /
(
ää/ 0
)
ää0 1
;
ää1 2
var
ãã 
listImg
ãã 
=
ãã 
new
ãã 
List
ãã "
<
ãã" #
Imagen
ãã# )
>
ãã) *
(
ãã* +
)
ãã+ ,
;
ãã, -
foreach
åå 
(
åå 
var
åå 
inm
åå 
in
åå 
	inmuebles
åå  )
)
åå) *
{
çç 
var
éé 
imagen
éé 
=
éé 

ImagenServ
éé '
.
éé' (%
GetImagenesByInmuebleId
éé( ?
(
éé? @
inm
éé@ C
.
ééC D

InmuebleId
ééD N
)
ééN O
;
ééO P
listImg
èè 
.
èè 
Add
èè 
(
èè 
imagen
èè "
)
èè" #
;
èè# $
}
íí 
ViewBag
îî 
.
îî 
Inmueble
îî 
=
îî 
inmueble
îî '
;
îî' (
ViewBag
ïï 
.
ïï 
InmuebleTipo
ïï  
=
ïï! "

InmTipServ
ïï# -
.
ïï- .
getInmuebleTipos
ïï. >
(
ïï> ?
)
ïï? @
;
ïï@ A
ViewBag
ññ 
.
ññ 
Ciudades
ññ 
=
ññ 
CiudServ
ññ '
.
ññ' (
GetCiudades
ññ( 3
(
ññ3 4
)
ññ4 5
;
ññ5 6
ViewBag
óó 
.
óó 
Imagenes
óó 
=
óó 

ImagenServ
óó )
.
óó) *(
GetAllImagenesByInmuebleID
óó* D
(
óóD E
inmueble
óóE M
.
óóM N

InmuebleId
óóN X
)
óóX Y
;
óóY Z
ViewBag
ôô 
.
ôô 
AllImgInmuebles
ôô #
=
ôô$ %
listImg
ôô& -
;
ôô- .
ViewBag
öö 
.
öö 
	Inmuebles
öö 
=
öö 
	inmuebles
öö  )
;
öö) *
return
úú 
View
úú 
(
úú 
)
úú 
;
úú 
}
ùù 	
[
ûû 	
HttpGet
ûû	 
]
ûû 
public
üü 
ActionResult
üü 
Direcciones
üü '
(
üü' (
)
üü( )
{
†† 	
return
°° 
View
°° 
(
°° 
)
°° 
;
°° 
}
¢¢ 	
}
££ 
}§§ ªJ
AD:\calidad\HousesPeru\HousesPeru\Controllers\UsuarioController.cs
	namespace 	

HousesPeru
 
. 
Controllers  
{ 
public 

class 
UsuarioController "
:# $

Controller% /
{ 
private 
readonly 
IUsuarioService (
UserServ) 1
;1 2
private 
readonly 
IValidacionUsuario +
val, /
;/ 0
private 
readonly 
IAuthService %
auth& *
;* +
private 
readonly 
IInmuebleService )
InmServ* 1
;1 2
private 
readonly 
IImageService &

ImagenServ' 1
;1 2
private 
readonly 
ICloudinaryService +
	Cloudserv, 5
;5 6
public 
UsuarioController  
(  !
IUsuarioService! 0
UserServ1 9
,9 :
IValidacionUsuario; M
valN Q
,Q R
IAuthServiceS _
auth` d
,d e
IInmuebleServicef v
InmServw ~
,~ 
IImageService
Ä ç

ImagenServ
é ò
,
ò ô 
ICloudinaryService
ö ¨
	Cloudserv
≠ ∂
)
∂ ∑
{ 	
this 
. 
UserServ 
= 
UserServ $
;$ %
this 
. 
val 
= 
val 
; 
this 
. 
auth 
= 
auth 
; 
this 
. 
InmServ 
= 
InmServ "
;" #
this 
. 

ImagenServ 
= 

ImagenServ (
;( )
this 
. 
	Cloudserv 
= 
	Cloudserv &
;& '
} 	
[!! 	
HttpGet!!	 
]!! 
public"" 
ActionResult"" 
RegistroAgente"" *
(""* +
)""+ ,
{## 	
var$$ 
user$$ 
=$$ 
auth$$ 
.$$ 
GetLogedUser$$ (
($$( )
)$$) *
;$$* +
if&& 
(&& 
user&& 
!=&& 
null&& 
)&& 
{'' 
ViewBag(( 
.(( 

UserLogged(( "
=((# $
user((% )
.(() *
TipoUsuario((* 5
;((5 6
if)) 
()) 
user)) 
.)) 
TipoUsuario)) $
==))% '
$str))( 7
)))7 8
{** 
return,, 
View,, 
(,,  
),,  !
;,,! "
}-- 
}.. 
ViewBag// 
.// 

UserLogged// 
=//  
null//! %
;//% &
return00 
RedirectToAction00 #
(00# $
$str00$ +
,00+ ,
$str00- 3
)003 4
;004 5
}44 	
[55 	
HttpPost55	 
]55 
public66 
ActionResult66 
RegistroAgente66 *
(66* +
UsuarioViewModel66+ ;
user66< @
)66@ A
{77 	
var88 
userlog88 
=88 
auth88 
.88 
GetLogedUser88 +
(88+ ,
)88, -
;88- .
if99 
(99 
userlog99 
.99 
TipoUsuario99 #
==99# %
$str99% 4
)994 5
{996 7
val:: 
.:: 
validarUsuario:: "
(::" #
user::# '
,::' (

ModelState::) 3
)::3 4
;::4 5
if;; 
(;; 

ModelState;; 
.;; 
IsValid;; &
);;& '
{<< 
UserServ== 
.== 
AddUsuarioAgente== -
(==- .
user==. 2
)==2 3
;==3 4
return>> 
RedirectToAction>> +
(>>+ ,
$str>>, 3
,>>3 4
$str>>5 ;
)>>; <
;>>< =
}?? 
return@@ 
View@@ 
(@@ 
user@@  
)@@  !
;@@! "
}AA 
returnBB 
RedirectToActionBB #
(BB# $
$strBB$ +
,BB+ ,
$strBB- 3
)BB3 4
;BB4 5
}DD 	
[EE 	
HttpGetEE	 
]EE 
publicFF 
ActionResultFF 
ListaUsuariosFF )
(FF) *
)FF* +
{GG 	
varHH 
usersHH 
=HH 
authHH 
.HH 
GetLogedUserHH )
(HH) *
)HH* +
;HH+ ,
ifII 
(II 
usersII 
.II 
TipoUsuarioII !
==II" $
$strII% 4
)II4 5
{JJ 
varKK 
usrKK 
=KK 
UserServKK "
.KK" #
GetUsuariosKK# .
(KK. /
)KK/ 0
;KK0 1
returnLL 
ViewLL 
(LL 
usrLL 
)LL  
;LL  !
}MM 
returnNN 
RedirectToActionNN #
(NN# $
$strNN$ +
,NN+ ,
$strNN- 3
)NN3 4
;NN4 5
}PP 	
[QQ 	
HttpGetQQ	 
]QQ 
publicRR 
ActionResultRR 
ListaAgentesRR (
(RR( )
)RR) *
{SS 	
varTT 
usersTT 
=TT 
authTT 
.TT 
GetLogedUserTT )
(TT) *
)TT* +
;TT+ ,
ifUU 
(UU 
usersUU 
.UU 
TipoUsuarioUU !
==UU" $
$strUU% 4
)UU4 5
{VV 
varWW 
usrWW 
=WW 
UserServWW "
.WW" #

GetAgentesWW# -
(WW- .
)WW. /
;WW/ 0
returnXX 
ViewXX 
(XX 
usrXX 
)XX  
;XX  !
}YY 
returnZZ 
RedirectToActionZZ #
(ZZ# $
$strZZ$ +
,ZZ+ ,
$strZZ- 3
)ZZ3 4
;ZZ4 5
}[[ 	
[]] 	
HttpGet]]	 
]]] 
public^^ 
ActionResult^^ 
GetUser^^ #
(^^# $
)^^$ %
{^^& '
var__ 
user__ 
=__ 
auth__ 
.__ 
GetLogedUser__ (
(__( )
)__) *
;__* +
var`` 
userTemp`` 
=`` 
UserServ`` "
.``" #
GetUsuarioByID``# 1
(``1 2
user``2 6
.``6 7
	UsuarioId``7 @
)``@ A
;``A B
ViewBagaa 
.aa 
Usuarioaa 
=aa 
userTempaa &
;aa& '
ViewBagbb 
.bb 

UserLoggedbb 
=bb  
userbb! %
.bb% &
TipoUsuariobb& 1
;bb1 2
vardd 
datodd 
=dd 
Convertdd 
.dd 

ToDateTimedd (
(dd( )
userTempdd) 1
.dd1 2
FechaNacimientodd2 A
.ddA B
ToStringddB J
(ddJ K
)ddK L
)ddL M
;ddM N
ViewBagee 
.ee 
FechaNacimientoee #
=ee$ %
datoee& *
.ee* +
ToStringee+ 3
(ee3 4
$stree4 @
)ee@ A
;eeA B
returngg 
Viewgg 
(gg 
)gg 
;gg 
}hh 	
[ii 	
HttpPostii	 
]ii 
publicjj 
ActionResultjj 
GetUserjj #
(jj# $
Usuariojj$ +
usuariojj, 3
,jj3 4
HttpPostedFileBasejj5 G
	imgperfiljjH Q
)jjR S
{kk 	
varll 
userll 
=ll 
authll 
.ll 
GetLogedUserll (
(ll( )
)ll) *
;ll* +
ifmm 
(mm 
	imgperfilmm 
!=mm 
nullmm !
)mm! "
{mm# $
stringnn 
imgnn 
=nn 
	Cloudservnn &
.nn& '
	uploadImgnn' 0
(nn0 1
	imgperfilnn1 :
)nn: ;
;nn; <
usuariooo 
.oo 
ImagenPerfiloo $
=oo% &
imgoo' *
;oo* +
}pp 
valqq 
.qq 
valUsrqq 
(qq 
usuarioqq 
,qq 

ModelStateqq )
)qq) *
;qq* +
ifss 
(ss 

ModelStatess 
.ss 
IsValidss "
)ss" #
{ss$ %
UserServtt 
.tt 
EditarUsuariott &
(tt& '
usertt' +
.tt+ ,
	UsuarioIdtt, 5
,tt5 6
usuariott7 >
)tt> ?
;tt? @
returnuu 
RedirectToActionuu '
(uu' (
$struu( /
,uu/ 0
$struu1 7
)uu7 8
;uu8 9
}vv 
ViewBagww 
.ww 

UserLoggedww 
=ww  
userww! %
.ww% &
TipoUsuarioww& 1
;ww1 2
returnxx 
Viewxx 
(xx 
)xx 
;xx 
}yy 	
}zz 
}{{ Ÿ!
:D:\calidad\HousesPeru\HousesPeru\DB\HousesInPeruContext.cs
	namespace 	

HousesPeru
 
. 
DB 
{ 
public 

class 
HousesInPeruContext $
:% &
	DbContext' 0
{ 
public 
virtual 
DbSet 
< 
Usuario $
>$ %
Usuarios& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
virtual 
DbSet 
< 
Plan !
>! "
Plans# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
InmuebleTipo )
>) *
InmuebleTipos+ 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
virtual 
DbSet 
< 
Inmueble %
>% &
	Inmuebles' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
virtual 
DbSet 
< 
Imagen #
># $
Imagens% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
virtual 
DbSet 
< 
Direcciones (
>( )
Direcciones* 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
virtual 
DbSet 
< 
Ciudades %
>% &
Ciudades' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
virtual 
DbSet 
< 
DetalleCompra *
>* +
DetalleCompras, :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
HousesInPeruContext "
(" #
)# $
{% &
Database 
. 
SetInitializer #
<# $
HousesInPeruContext$ 7
>7 8
(8 9
null9 =
)= >
;> ?
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
DbModelBuilder0 >
modelBuilder? K
)K L
{M N
base   
.   
OnModelCreating    
(    !
modelBuilder  ! -
)  - .
;  . /
modelBuilder"" 
."" 
Configurations"" '
.""' (
Add""( +
(""+ ,
new"", /

UsuarioMap""0 :
("": ;
)""; <
)""< =
;""= >
modelBuilder$$ 
.$$ 
Configurations$$ '
.$$' (
Add$$( +
($$+ ,
new$$, /
PlanMap$$0 7
($$7 8
)$$8 9
)$$9 :
;$$: ;
modelBuilder%% 
.%% 
Configurations%% '
.%%' (
Add%%( +
(%%+ ,
new%%, /
InmuebleTipoMap%%0 ?
(%%? @
)%%@ A
)%%A B
;%%B C
modelBuilder&& 
.&& 
Configurations&& '
.&&' (
Add&&( +
(&&+ ,
new&&, /
InmuebleMap&&0 ;
(&&; <
)&&< =
)&&= >
;&&> ?
modelBuilder'' 
.'' 
Configurations'' '
.''' (
Add''( +
(''+ ,
new'', /
	ImagenMap''0 9
(''9 :
)'': ;
)''; <
;''< =
modelBuilder(( 
.(( 
Configurations(( '
.((' (
Add((( +
(((+ ,
new((, /
CiudadesMap((0 ;
(((; <
)((< =
)((= >
;((> ?
modelBuilder)) 
.)) 
Configurations)) '
.))' (
Add))( +
())+ ,
new)), /
DetalleCompraMap))0 @
())@ A
)))A B
)))B C
;))C D
}++ 	
}.. 
}// —
7D:\calidad\HousesPeru\HousesPeru\DB\Maps\CiudadesMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
CiudadesMap

 
:

 #
EntityTypeConfiguration

 6
<

6 7
Ciudades

7 ?
>

? @
{ 
public 
CiudadesMap 
( 
) 
{ 
ToTable 
( 
$str 
) 
;  
HasKey 
( 
x 
=> 
x 
. 

CiudadesId $
)$ %
;% &
HasMany 
( 
x 
=> 
x 
. 
	Inmuebles $
)$ %
. 
WithOptional !
(! "
)" #
. 
HasForeignKey "
(" #
x# $
=>% '
x( )
.) *
CiudadId* 2
)2 3
;3 4
} 	
} 
} 
<D:\calidad\HousesPeru\HousesPeru\DB\Maps\DetalleCompraMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
DetalleCompraMap

 !
:

! "#
EntityTypeConfiguration

# :
<

: ;
DetalleCompra

; H
>

H I
{ 
public 
DetalleCompraMap 
(  
)  !
{ 
ToTable 
( 
$str "
)" #
;# $
HasKey 
( 
x 
=> 
x 
. 
DetalleCompraId %
)% &
;& '
} 
} 
} –	
5D:\calidad\HousesPeru\HousesPeru\DB\Maps\ImagenMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
	ImagenMap

 
:

 #
EntityTypeConfiguration

 4
<

4 5
Imagen

5 ;
>

; <
{ 
public 
	ImagenMap 
( 
) 
{ 	
ToTable 
( 
$str 
) 
; 
HasKey 
( 
x 
=> 
x 
. 
ImagenId "
)" #
;# $
HasRequired 
< 
Inmueble  
>  !
(! "
x" #
=>$ &
x' (
.( )
	Inmuebles) 2
)2 3
. 
WithMany 
( 
x 
=> 
x  
.  !
Imagenes! )
)) *
. 
HasForeignKey 
( 
x  
=>! #
x$ %
.% &

InmuebleId& 0
)0 1
;1 2
} 	
} 
}  
7D:\calidad\HousesPeru\HousesPeru\DB\Maps\InmuebleMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
InmuebleMap

 
:

 #
EntityTypeConfiguration

 6
<

6 7
Inmueble

7 ?
>

? @
{ 
public 
InmuebleMap 
( 
) 
{ 	
ToTable 
( 
$str 
) 
;  
HasKey 
( 
x 
=> 
x 
. 

InmuebleId $
)$ %
;% &
HasRequired 
( 
x 
=> 
x 
. 
InmuebleTipo +
)+ ,
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
x  
=>! #
x$ %
.% &
InmuebleTipoId& 4
)4 5
;5 6
HasRequired 
( 
x 
=> 
x 
. 
Usuario %
)% &
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
x  
=>! #
x$ %
.% &
	UsuarioId& /
)/ 0
;0 1
HasMany 
( 
x 
=> 
x 
. 
Imagenes #
)# $
. 
WithRequired 
( 
) 
. 
HasForeignKey 
( 
x  
=>! #
x$ %
.% &

InmuebleId& 0
)0 1
;1 2
} 	
} 
} Î
;D:\calidad\HousesPeru\HousesPeru\DB\Maps\InmuebleTipoMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
InmuebleTipoMap

  
:

! "#
EntityTypeConfiguration

# :
<

: ;
InmuebleTipo

; G
>

G H
{ 
public 
InmuebleTipoMap 
( 
)  
{ 	
ToTable 
( 
$str "
)" #
;# $
HasKey 
( 
x 
=> 
x 
. 
InmuebleTipoId (
)( )
;) *
HasMany 
( 
x 
=> 
x 
. 
	Inmuebles $
)$ %
. 
WithOptional 
( 
) 
. 
HasForeignKey 
( 
x 
=>  
x! "
." #
InmuebleTipoId# 1
)1 2
;2 3
} 	
} 
} ∂
3D:\calidad\HousesPeru\HousesPeru\DB\Maps\PlanMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 
PlanMap

 
:

 #
EntityTypeConfiguration

 2
<

2 3
Plan

3 7
>

7 8
{ 
public 
PlanMap 
( 
) 
{ 	
ToTable 
( 
$str 
) 
; 
HasKey 
( 
x 
=> 
x 
. 
Id 
) 
; 
HasMany 
( 
x 
=> 
x 
. 
Usuarios #
)# $
. 
WithOptional 
( 
) 
. 
HasForeignKey 
( 
x  
=>! #
x$ %
.% &
PlanId& ,
), -
;- .
} 	
} 
} è
6D:\calidad\HousesPeru\HousesPeru\DB\Maps\UsuarioMap.cs
	namespace 	

HousesPeru
 
. 
DB 
. 
Maps 
{		 
public

 

class

 

UsuarioMap

 
:

 #
EntityTypeConfiguration

 5
<

5 6
Usuario

6 =
>

= >
{ 
public 

UsuarioMap 
( 
) 
{ 	
ToTable 
( 
$str 
) 
; 
HasKey 
( 
x 
=> 
x 
. 
	UsuarioId #
)# $
;$ %
HasRequired 
( 
o 
=> 
o 
. 
Plan #
)# $
. 
WithMany 
( 
o 
=> 
o 
. 
Usuarios &
)& '
. 
HasForeignKey 
( 
o 
=>  
o! "
." #
PlanId# )
)) *
;* +
HasMany 
( 
d 
=> 
d 
. 
	Inmuebles $
)$ %
. 
WithOptional 
( 
) 
. 
HasForeignKey 
( 
d  
=>  "
d" #
.# $
	UsuarioId$ -
)- .
;. /
HasMany 
( 
d 
=> 
d 
. 
DetalleCompras )
)) *
. 
WithOptional 
( 
) 
. 
HasForeignKey 
( 
d 
=>  "
d# $
.$ %
	UsuarioId% .
). /
;/ 0
} 	
} 
} ÿ
/D:\calidad\HousesPeru\HousesPeru\Global.asax.cs
	namespace		 	

HousesPeru		
 
{

 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
} 	
} 
} —«
HD:\calidad\HousesPeru\HousesPeru\Migrations\202003262101467_version_1.cs
	namespace 	

HousesPeru
 
. 

Migrations 
{ 
public 

partial 
class 
	version_1 "
:# $
DbMigration% 0
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
CreateTable

 
(

 
$str 
, 
c 
=> 
new 
{ 

CiudadesId "
=# $
c% &
.& '
Int' *
(* +
nullable+ 3
:3 4
false5 :
,: ;
identity< D
:D E
trueF J
)J K
,K L
Nombre 
=  
c! "
." #
String# )
() *
)* +
,+ ,
} 
) 
. 

PrimaryKey 
( 
t 
=>  
t! "
." #

CiudadesId# -
)- .
;. /
CreateTable 
( 
$str 
, 
c 
=> 
new 
{ 

InmuebleId "
=# $
c% &
.& '
Int' *
(* +
nullable+ 3
:3 4
false5 :
,: ;
identity< D
:D E
trueF J
)J K
,K L
	UsuarioId !
=" #
c$ %
.% &
Int& )
() *
nullable* 2
:2 3
false4 9
)9 :
,: ;
CiudadId  
=! "
c# $
.$ %
Int% (
(( )
nullable) 1
:1 2
false3 8
)8 9
,9 :
InmuebleTipoId &
=' (
c) *
.* +
Int+ .
(. /
nullable/ 7
:7 8
false9 >
)> ?
,? @
PublicacionId %
=& '
c( )
.) *
Int* -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
	NombreInm !
=" #
c$ %
.% &
String& ,
(, -
)- .
,. /
Area 
= 
c  
.  !
String! '
(' (
)( )
,) *
NumHabitaciones '
=( )
c* +
.+ ,
String, 2
(2 3
)3 4
,4 5
Pisos 
= 
c  !
.! "
String" (
(( )
)) *
,* +
Piso   
=   
c    
.    !
String  ! '
(  ' (
)  ( )
,  ) *
PrecioVentaInm!! &
=!!' (
c!!) *
.!!* +
String!!+ 1
(!!1 2
)!!2 3
,!!3 4
PrecioAlquilerInm"" )
=""* +
c"", -
.""- .
String"". 4
(""4 5
)""5 6
,""6 7
UbicacionInm## $
=##% &
c##' (
.##( )
String##) /
(##/ 0
)##0 1
,##1 2
Ba√±os$$ 
=$$ 
c$$  !
.$$! "
String$$" (
($$( )
)$$) *
,$$* +
Garages%% 
=%%  !
c%%" #
.%%# $
String%%$ *
(%%* +
)%%+ ,
,%%, -
FechaPublic&& #
=&&$ %
c&&& '
.&&' (
DateTime&&( 0
(&&0 1
)&&1 2
,&&2 3
Descripcion'' #
=''$ %
c''& '
.''' (
String''( .
(''. /
)''/ 0
,''0 1

NumCelular(( "
=((# $
c((% &
.((& '
String((' -
(((- .
)((. /
,((/ 0

EstaActivo)) "
=))# $
c))% &
.))& '
Boolean))' .
()). /
)))/ 0
,))0 1
Moneda** 
=**  
c**! "
.**" #
String**# )
(**) *
)*** +
,**+ ,
Ciudad_CiudadesId++ )
=++* +
c++, -
.++- .
Int++. 1
(++1 2
)++2 3
,++3 4
},, 
),, 
.-- 

PrimaryKey-- 
(-- 
t-- 
=>--  
t--! "
.--" #

InmuebleId--# -
)--- .
... 

ForeignKey.. 
(.. 
$str.. *
,..* +
t.., -
=>... 0
t..1 2
...2 3
Ciudad_CiudadesId..3 D
)..D E
.// 

ForeignKey// 
(// 
$str// .
,//. /
t//0 1
=>//2 4
t//5 6
.//6 7
InmuebleTipoId//7 E
,//E F
cascadeDelete//G T
://T U
true//V Z
)//Z [
.00 

ForeignKey00 
(00 
$str00 -
,00- .
t00/ 0
=>001 3
t004 5
.005 6
PublicacionId006 C
,00C D
cascadeDelete00E R
:00R S
true00T X
)00X Y
.11 

ForeignKey11 
(11 
$str11 )
,11) *
t11+ ,
=>11- /
t110 1
.111 2
	UsuarioId112 ;
,11; <
cascadeDelete11= J
:11J K
true11L P
)11P Q
.22 

ForeignKey22 
(22 
$str22 *
,22* +
t22, -
=>22. 0
t221 2
.222 3
CiudadId223 ;
,22; <
cascadeDelete22= J
:22J K
true22L P
)22P Q
.33 
Index33 
(33 
t33 
=>33 
t33 
.33 
	UsuarioId33 '
)33' (
.44 
Index44 
(44 
t44 
=>44 
t44 
.44 
CiudadId44 &
)44& '
.55 
Index55 
(55 
t55 
=>55 
t55 
.55 
InmuebleTipoId55 ,
)55, -
.66 
Index66 
(66 
t66 
=>66 
t66 
.66 
PublicacionId66 +
)66+ ,
.77 
Index77 
(77 
t77 
=>77 
t77 
.77 
Ciudad_CiudadesId77 /
)77/ 0
;770 1
CreateTable99 
(99 
$str:: !
,::! "
c;; 
=>;; 
new;; 
{<< 
DireccionesId== %
===& '
c==( )
.==) *
Int==* -
(==- .
nullable==. 6
:==6 7
false==8 =
,=== >
identity==? G
:==G H
true==I M
)==M N
,==N O
	Ubicacion>> !
=>>" #
c>>$ %
.>>% &
String>>& ,
(>>, -
)>>- .
,>>. /
Latitud?? 
=??  !
c??" #
.??# $
String??$ *
(??* +
)??+ ,
,??, -
Longitud@@  
=@@! "
c@@# $
.@@$ %
String@@% +
(@@+ ,
)@@, -
,@@- .

InmuebleIdAA "
=AA# $
cAA% &
.AA& '
IntAA' *
(AA* +
nullableAA+ 3
:AA3 4
falseAA5 :
)AA: ;
,AA; <
}BB 
)BB 
.CC 

PrimaryKeyCC 
(CC 
tCC 
=>CC  
tCC! "
.CC" #
DireccionesIdCC# 0
)CC0 1
.DD 

ForeignKeyDD 
(DD 
$strDD *
,DD* +
tDD, -
=>DD. 0
tDD1 2
.DD2 3

InmuebleIdDD3 =
,DD= >
cascadeDeleteDD? L
:DDL M
trueDDN R
)DDR S
.EE 
IndexEE 
(EE 
tEE 
=>EE 
tEE 
.EE 

InmuebleIdEE (
)EE( )
;EE) *
CreateTableGG 
(GG 
$strHH 
,HH 
cII 
=>II 
newII 
{JJ 
ImagenIdKK  
=KK! "
cKK# $
.KK$ %
IntKK% (
(KK( )
nullableKK) 1
:KK1 2
falseKK3 8
,KK8 9
identityKK: B
:KKB C
trueKKD H
)KKH I
,KKI J
Img1LL 
=LL 
cLL  
.LL  !
StringLL! '
(LL' (
)LL( )
,LL) *
Img2MM 
=MM 
cMM  
.MM  !
StringMM! '
(MM' (
)MM( )
,MM) *
Img3NN 
=NN 
cNN  
.NN  !
StringNN! '
(NN' (
)NN( )
,NN) *
Img4OO 
=OO 
cOO  
.OO  !
StringOO! '
(OO' (
)OO( )
,OO) *
Img5PP 
=PP 
cPP  
.PP  !
StringPP! '
(PP' (
)PP( )
,PP) *
Img6QQ 
=QQ 
cQQ  
.QQ  !
StringQQ! '
(QQ' (
)QQ( )
,QQ) *
Img7RR 
=RR 
cRR  
.RR  !
StringRR! '
(RR' (
)RR( )
,RR) *
Img8SS 
=SS 
cSS  
.SS  !
StringSS! '
(SS' (
)SS( )
,SS) *
Img9TT 
=TT 
cTT  
.TT  !
StringTT! '
(TT' (
)TT( )
,TT) *
Img10UU 
=UU 
cUU  !
.UU! "
StringUU" (
(UU( )
)UU) *
,UU* +
Img11VV 
=VV 
cVV  !
.VV! "
StringVV" (
(VV( )
)VV) *
,VV* +
Img12WW 
=WW 
cWW  !
.WW! "
StringWW" (
(WW( )
)WW) *
,WW* +
Img13XX 
=XX 
cXX  !
.XX! "
StringXX" (
(XX( )
)XX) *
,XX* +
Img14YY 
=YY 
cYY  !
.YY! "
StringYY" (
(YY( )
)YY) *
,YY* +
Img15ZZ 
=ZZ 
cZZ  !
.ZZ! "
StringZZ" (
(ZZ( )
)ZZ) *
,ZZ* +
Img16[[ 
=[[ 
c[[  !
.[[! "
String[[" (
([[( )
)[[) *
,[[* +
Img17\\ 
=\\ 
c\\  !
.\\! "
String\\" (
(\\( )
)\\) *
,\\* +
Img18]] 
=]] 
c]]  !
.]]! "
String]]" (
(]]( )
)]]) *
,]]* +
Img19^^ 
=^^ 
c^^  !
.^^! "
String^^" (
(^^( )
)^^) *
,^^* +
Img20__ 
=__ 
c__  !
.__! "
String__" (
(__( )
)__) *
,__* +

InmuebleId`` "
=``# $
c``% &
.``& '
Int``' *
(``* +
nullable``+ 3
:``3 4
false``5 :
)``: ;
,``; <
}aa 
)aa 
.bb 

PrimaryKeybb 
(bb 
tbb 
=>bb  
tbb! "
.bb" #
ImagenIdbb# +
)bb+ ,
.cc 

ForeignKeycc 
(cc 
$strcc *
,cc* +
tcc, -
=>cc. 0
tcc1 2
.cc2 3

InmuebleIdcc3 =
,cc= >
cascadeDeletecc? L
:ccL M
trueccN R
)ccR S
.dd 
Indexdd 
(dd 
tdd 
=>dd 
tdd 
.dd 

InmuebleIddd (
)dd( )
;dd) *
CreateTableff 
(ff 
$strgg "
,gg" #
chh 
=>hh 
newhh 
{ii 
InmuebleTipoIdjj &
=jj' (
cjj) *
.jj* +
Intjj+ .
(jj. /
nullablejj/ 7
:jj7 8
falsejj9 >
,jj> ?
identityjj@ H
:jjH I
truejjJ N
)jjN O
,jjO P
Nombrekk 
=kk  
ckk! "
.kk" #
Stringkk# )
(kk) *
)kk* +
,kk+ ,
}ll 
)ll 
.mm 

PrimaryKeymm 
(mm 
tmm 
=>mm  
tmm! "
.mm" #
InmuebleTipoIdmm# 1
)mm1 2
;mm2 3
CreateTableoo 
(oo 
$strpp !
,pp! "
cqq 
=>qq 
newqq 
{rr 
Idss 
=ss 
css 
.ss 
Intss "
(ss" #
nullabless# +
:ss+ ,
falsess- 2
,ss2 3
identityss4 <
:ss< =
truess> B
)ssB C
,ssC D
FechaIniciott #
=tt$ %
ctt& '
.tt' (
DateTimett( 0
(tt0 1
nullablett1 9
:tt9 :
falsett; @
)tt@ A
,ttA B
FechaFinuu  
=uu! "
cuu# $
.uu$ %
DateTimeuu% -
(uu- .
nullableuu. 6
:uu6 7
falseuu8 =
)uu= >
,uu> ?
Inmueble_InmuebleIdvv +
=vv, -
cvv. /
.vv/ 0
Intvv0 3
(vv3 4
)vv4 5
,vv5 6
}ww 
)ww 
.xx 

PrimaryKeyxx 
(xx 
txx 
=>xx  
txx! "
.xx" #
Idxx# %
)xx% &
.yy 

ForeignKeyyy 
(yy 
$stryy *
,yy* +
tyy, -
=>yy. 0
tyy1 2
.yy2 3
Inmueble_InmuebleIdyy3 F
)yyF G
.zz 
Indexzz 
(zz 
tzz 
=>zz 
tzz 
.zz 
Inmueble_InmuebleIdzz 1
)zz1 2
;zz2 3
CreateTable|| 
(|| 
$str}} 
,}} 
c~~ 
=>~~ 
new~~ 
{ 
	UsuarioId
ÄÄ !
=
ÄÄ" #
c
ÄÄ$ %
.
ÄÄ% &
Int
ÄÄ& )
(
ÄÄ) *
nullable
ÄÄ* 2
:
ÄÄ2 3
false
ÄÄ4 9
,
ÄÄ9 :
identity
ÄÄ; C
:
ÄÄC D
true
ÄÄE I
)
ÄÄI J
,
ÄÄJ K
Nombre
ÅÅ 
=
ÅÅ  
c
ÅÅ! "
.
ÅÅ" #
String
ÅÅ# )
(
ÅÅ) *
)
ÅÅ* +
,
ÅÅ+ ,
	ApellidoP
ÇÇ !
=
ÇÇ" #
c
ÇÇ$ %
.
ÇÇ% &
String
ÇÇ& ,
(
ÇÇ, -
)
ÇÇ- .
,
ÇÇ. /
	ApellidoM
ÉÉ !
=
ÉÉ" #
c
ÉÉ$ %
.
ÉÉ% &
String
ÉÉ& ,
(
ÉÉ, -
)
ÉÉ- .
,
ÉÉ. /
FechaNacimiento
ÑÑ '
=
ÑÑ( )
c
ÑÑ* +
.
ÑÑ+ ,
DateTime
ÑÑ, 4
(
ÑÑ4 5
)
ÑÑ5 6
,
ÑÑ6 7
Email
ÖÖ 
=
ÖÖ 
c
ÖÖ  !
.
ÖÖ! "
String
ÖÖ" (
(
ÖÖ( )
)
ÖÖ) *
,
ÖÖ* +
Password
ÜÜ  
=
ÜÜ! "
c
ÜÜ# $
.
ÜÜ$ %
String
ÜÜ% +
(
ÜÜ+ ,
)
ÜÜ, -
,
ÜÜ- .
Sexo
áá 
=
áá 
c
áá  
.
áá  !
String
áá! '
(
áá' (
)
áá( )
,
áá) *
TipoUsuario
àà #
=
àà$ %
c
àà& '
.
àà' (
String
àà( .
(
àà. /
)
àà/ 0
,
àà0 1
FechaRegistro
ââ %
=
ââ& '
c
ââ( )
.
ââ) *
DateTime
ââ* 2
(
ââ2 3
nullable
ââ3 ;
:
ââ; <
false
ââ= B
)
ââB C
,
ââC D
PlanId
ää 
=
ää  
c
ää! "
.
ää" #
Int
ää# &
(
ää& '
nullable
ää' /
:
ää/ 0
false
ää1 6
)
ää6 7
,
ää7 8
}
ãã 
)
ãã 
.
åå 

PrimaryKey
åå 
(
åå 
t
åå 
=>
åå  
t
åå! "
.
åå" #
	UsuarioId
åå# ,
)
åå, -
.
çç 

ForeignKey
çç 
(
çç 
$str
çç &
,
çç& '
t
çç( )
=>
çç* ,
t
çç- .
.
çç. /
PlanId
çç/ 5
,
çç5 6
cascadeDelete
çç7 D
:
ççD E
true
ççF J
)
ççJ K
.
éé 
Index
éé 
(
éé 
t
éé 
=>
éé 
t
éé 
.
éé 
PlanId
éé $
)
éé$ %
;
éé% &
CreateTable
êê 
(
êê 
$str
ëë &
,
ëë& '
c
íí 
=>
íí 
new
íí 
{
ìì 
DetalleCompraId
îî '
=
îî( )
c
îî* +
.
îî+ ,
Int
îî, /
(
îî/ 0
nullable
îî0 8
:
îî8 9
false
îî: ?
,
îî? @
identity
îîA I
:
îîI J
true
îîK O
)
îîO P
,
îîP Q
Monto
ïï 
=
ïï 
c
ïï  !
.
ïï! "
String
ïï" (
(
ïï( )
)
ïï) *
,
ïï* +
Pago
ññ 
=
ññ 
c
ññ  
.
ññ  !
Boolean
ññ! (
(
ññ( )
)
ññ) *
,
ññ* +
	UsuarioId
óó !
=
óó" #
c
óó$ %
.
óó% &
Int
óó& )
(
óó) *
nullable
óó* 2
:
óó2 3
false
óó4 9
)
óó9 :
,
óó: ; 
usuarios_UsuarioId
òò *
=
òò+ ,
c
òò- .
.
òò. /
Int
òò/ 2
(
òò2 3
)
òò3 4
,
òò4 5
}
ôô 
)
ôô 
.
öö 

PrimaryKey
öö 
(
öö 
t
öö 
=>
öö  
t
öö! "
.
öö" #
DetalleCompraId
öö# 2
)
öö2 3
.
õõ 

ForeignKey
õõ 
(
õõ 
$str
õõ )
,
õõ) *
t
õõ+ ,
=>
õõ- /
t
õõ0 1
.
õõ1 2 
usuarios_UsuarioId
õõ2 D
)
õõD E
.
úú 

ForeignKey
úú 
(
úú 
$str
úú )
,
úú) *
t
úú+ ,
=>
úú- /
t
úú0 1
.
úú1 2
	UsuarioId
úú2 ;
,
úú; <
cascadeDelete
úú= J
:
úúJ K
true
úúL P
)
úúP Q
.
ùù 
Index
ùù 
(
ùù 
t
ùù 
=>
ùù 
t
ùù 
.
ùù 
	UsuarioId
ùù '
)
ùù' (
.
ûû 
Index
ûû 
(
ûû 
t
ûû 
=>
ûû 
t
ûû 
.
ûû  
usuarios_UsuarioId
ûû 0
)
ûû0 1
;
ûû1 2
CreateTable
†† 
(
†† 
$str
°° 
,
°° 
c
¢¢ 
=>
¢¢ 
new
¢¢ 
{
££ 
Id
§§ 
=
§§ 
c
§§ 
.
§§ 
Int
§§ "
(
§§" #
nullable
§§# +
:
§§+ ,
false
§§- 2
,
§§2 3
identity
§§4 <
:
§§< =
true
§§> B
)
§§B C
,
§§C D
Nombre
•• 
=
••  
c
••! "
.
••" #
String
••# )
(
••) *
)
••* +
,
••+ ,
Descripcion
¶¶ #
=
¶¶$ %
c
¶¶& '
.
¶¶' (
String
¶¶( .
(
¶¶. /
)
¶¶/ 0
,
¶¶0 1
Precio
ßß 
=
ßß  
c
ßß! "
.
ßß" #
String
ßß# )
(
ßß) *
)
ßß* +
,
ßß+ ,
}
®® 
)
®® 
.
©© 

PrimaryKey
©© 
(
©© 
t
©© 
=>
©©  
t
©©! "
.
©©" #
Id
©©# %
)
©©% &
;
©©& '
}
´´ 	
public
≠≠ 
override
≠≠ 
void
≠≠ 
Down
≠≠ !
(
≠≠! "
)
≠≠" #
{
ÆÆ 	
DropForeignKey
ØØ 
(
ØØ 
$str
ØØ )
,
ØØ) *
$str
ØØ+ 5
,
ØØ5 6
$str
ØØ7 E
)
ØØE F
;
ØØF G
DropForeignKey
∞∞ 
(
∞∞ 
$str
∞∞ (
,
∞∞( )
$str
∞∞* 2
,
∞∞2 3
$str
∞∞4 >
)
∞∞> ?
;
∞∞? @
DropForeignKey
±± 
(
±± 
$str
±± )
,
±±) *
$str
±±+ 6
,
±±6 7
$str
±±8 E
)
±±E F
;
±±F G
DropForeignKey
≤≤ 
(
≤≤ 
$str
≤≤ 1
,
≤≤1 2
$str
≤≤3 >
,
≤≤> ?
$str
≤≤@ M
)
≤≤M N
;
≤≤N O
DropForeignKey
≥≥ 
(
≥≥ 
$str
≥≥ 1
,
≥≥1 2
$str
≥≥3 G
,
≥≥G H
$str
≥≥I V
)
≥≥V W
;
≥≥W X
DropForeignKey
¥¥ 
(
¥¥ 
$str
¥¥ )
,
¥¥) *
$str
¥¥+ :
,
¥¥: ;
$str
¥¥< M
)
¥¥M N
;
¥¥N O
DropForeignKey
µµ 
(
µµ 
$str
µµ ,
,
µµ, -
$str
µµ. C
,
µµC D
$str
µµE S
)
µµS T
;
µµT U
DropForeignKey
∂∂ 
(
∂∂ 
$str
∂∂ )
,
∂∂) *
$str
∂∂+ ;
,
∂∂; <
$str
∂∂= O
)
∂∂O P
;
∂∂P Q
DropForeignKey
∑∑ 
(
∑∑ 
$str
∑∑ '
,
∑∑' (
$str
∑∑) 5
,
∑∑5 6
$str
∑∑7 E
)
∑∑E F
;
∑∑F G
DropForeignKey
∏∏ 
(
∏∏ 
$str
∏∏ ,
,
∏∏, -
$str
∏∏. :
,
∏∏: ;
$str
∏∏< J
)
∏∏J K
;
∏∏K L
DropForeignKey
ππ 
(
ππ 
$str
ππ )
,
ππ) *
$str
ππ+ >
,
ππ> ?
$str
ππ@ N
)
ππN O
;
ππO P
	DropIndex
∫∫ 
(
∫∫ 
$str
∫∫ ,
,
∫∫, -
new
∫∫. 1
[
∫∫1 2
]
∫∫2 3
{
∫∫4 5
$str
∫∫6 J
}
∫∫K L
)
∫∫L M
;
∫∫M N
	DropIndex
ªª 
(
ªª 
$str
ªª ,
,
ªª, -
new
ªª. 1
[
ªª1 2
]
ªª2 3
{
ªª4 5
$str
ªª6 A
}
ªªB C
)
ªªC D
;
ªªD E
	DropIndex
ºº 
(
ºº 
$str
ºº #
,
ºº# $
new
ºº% (
[
ºº( )
]
ºº) *
{
ºº+ ,
$str
ºº- 5
}
ºº6 7
)
ºº7 8
;
ºº8 9
	DropIndex
ΩΩ 
(
ΩΩ 
$str
ΩΩ '
,
ΩΩ' (
new
ΩΩ) ,
[
ΩΩ, -
]
ΩΩ- .
{
ΩΩ/ 0
$str
ΩΩ1 F
}
ΩΩG H
)
ΩΩH I
;
ΩΩI J
	DropIndex
ææ 
(
ææ 
$str
ææ "
,
ææ" #
new
ææ$ '
[
ææ' (
]
ææ( )
{
ææ* +
$str
ææ, 8
}
ææ9 :
)
ææ: ;
;
ææ; <
	DropIndex
øø 
(
øø 
$str
øø '
,
øø' (
new
øø) ,
[
øø, -
]
øø- .
{
øø/ 0
$str
øø1 =
}
øø> ?
)
øø? @
;
øø@ A
	DropIndex
¿¿ 
(
¿¿ 
$str
¿¿ $
,
¿¿$ %
new
¿¿& )
[
¿¿) *
]
¿¿* +
{
¿¿, -
$str
¿¿. A
}
¿¿B C
)
¿¿C D
;
¿¿D E
	DropIndex
¡¡ 
(
¡¡ 
$str
¡¡ $
,
¡¡$ %
new
¡¡& )
[
¡¡) *
]
¡¡* +
{
¡¡, -
$str
¡¡. =
}
¡¡> ?
)
¡¡? @
;
¡¡@ A
	DropIndex
¬¬ 
(
¬¬ 
$str
¬¬ $
,
¬¬$ %
new
¬¬& )
[
¬¬) *
]
¬¬* +
{
¬¬, -
$str
¬¬. >
}
¬¬? @
)
¬¬@ A
;
¬¬A B
	DropIndex
√√ 
(
√√ 
$str
√√ $
,
√√$ %
new
√√& )
[
√√) *
]
√√* +
{
√√, -
$str
√√. 8
}
√√9 :
)
√√: ;
;
√√; <
	DropIndex
ƒƒ 
(
ƒƒ 
$str
ƒƒ $
,
ƒƒ$ %
new
ƒƒ& )
[
ƒƒ) *
]
ƒƒ* +
{
ƒƒ, -
$str
ƒƒ. 9
}
ƒƒ: ;
)
ƒƒ; <
;
ƒƒ< =
	DropTable
≈≈ 
(
≈≈ 
$str
≈≈  
)
≈≈  !
;
≈≈! "
	DropTable
∆∆ 
(
∆∆ 
$str
∆∆ ,
)
∆∆, -
;
∆∆- .
	DropTable
«« 
(
«« 
$str
«« #
)
««# $
;
««$ %
	DropTable
»» 
(
»» 
$str
»» '
)
»»' (
;
»»( )
	DropTable
…… 
(
…… 
$str
…… (
)
……( )
;
……) *
	DropTable
   
(
   
$str
   "
)
  " #
;
  # $
	DropTable
ÀÀ 
(
ÀÀ 
$str
ÀÀ '
)
ÀÀ' (
;
ÀÀ( )
	DropTable
ÃÃ 
(
ÃÃ 
$str
ÃÃ $
)
ÃÃ$ %
;
ÃÃ% &
	DropTable
ÕÕ 
(
ÕÕ 
$str
ÕÕ $
)
ÕÕ$ %
;
ÕÕ% &
}
ŒŒ 	
}
œœ 
}–– µ"
HD:\calidad\HousesPeru\HousesPeru\Migrations\202003272041423_version_2.cs
	namespace 	

HousesPeru
 
. 

Migrations 
{ 
public 

partial 
class 
	version_2 "
:# $
DbMigration% 0
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
DropForeignKey

 
(

 
$str

 ,
,

, -
$str

. C
,

C D
$str

E S
)

S T
;

T U
DropForeignKey 
( 
$str )
,) *
$str+ :
,: ;
$str< M
)M N
;N O
	DropIndex 
( 
$str $
,$ %
new& )
[) *
]* +
{, -
$str. =
}> ?
)? @
;@ A
	DropIndex 
( 
$str '
,' (
new) ,
[, -
]- .
{/ 0
$str1 F
}G H
)H I
;I J
	AddColumn 
( 
$str #
,# $
$str% 6
,6 7
c8 9
=>: <
c= >
.> ?
DateTime? G
(G H
nullableH P
:P Q
falseR W
)W X
)X Y
;Y Z
	AddColumn 
( 
$str #
,# $
$str% 3
,3 4
c5 6
=>7 9
c: ;
.; <
DateTime< D
(D E
)E F
)F G
;G H

DropColumn 
( 
$str %
,% &
$str' 6
)6 7
;7 8
	DropTable 
( 
$str '
)' (
;( )
} 	
public 
override 
void 
Down !
(! "
)" #
{ 	
CreateTable 
( 
$str !
,! "
c 
=> 
new 
{ 
Id 
= 
c 
. 
Int "
(" #
nullable# +
:+ ,
false- 2
,2 3
identity4 <
:< =
true> B
)B C
,C D
FechaInicio #
=$ %
c& '
.' (
DateTime( 0
(0 1
nullable1 9
:9 :
false; @
)@ A
,A B
FechaFin  
=! "
c# $
.$ %
DateTime% -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Inmueble_InmuebleId +
=, -
c. /
./ 0
Int0 3
(3 4
)4 5
,5 6
} 
) 
. 

PrimaryKey 
( 
t 
=>  
t! "
." #
Id# %
)% &
;& '
	AddColumn!! 
(!! 
$str!! $
,!!$ %
$str!!& 5
,!!5 6
c!!7 8
=>!!9 ;
c!!< =
.!!= >
Int!!> A
(!!A B
nullable!!B J
:!!J K
false!!L Q
)!!Q R
)!!R S
;!!S T

DropColumn"" 
("" 
$str"" $
,""$ %
$str""& 4
)""4 5
;""5 6

DropColumn## 
(## 
$str## $
,##$ %
$str##& 7
)##7 8
;##8 9
CreateIndex$$ 
($$ 
$str$$ )
,$$) *
$str$$+ @
)$$@ A
;$$A B
CreateIndex%% 
(%% 
$str%% &
,%%& '
$str%%( 7
)%%7 8
;%%8 9
AddForeignKey&& 
(&& 
$str&& (
,&&( )
$str&&* 9
,&&9 :
$str&&; L
,&&L M
$str&&N R
,&&R S
cascadeDelete&&T a
:&&a b
true&&c g
)&&g h
;&&h i
AddForeignKey'' 
('' 
$str'' +
,''+ ,
$str''- B
,''B C
$str''D R
,''R S
$str''T `
)''` a
;''a b
}(( 	
})) 
}** ‘@
HD:\calidad\HousesPeru\HousesPeru\Migrations\202004090548358_version_3.cs
	namespace 	

HousesPeru
 
. 

Migrations 
{ 
public 

partial 
class 
	version_3 "
:# $
DbMigration% 0
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
	AddColumn

 
(

 
$str

 "
,

" #
$str

$ )
,

) *
c

+ ,
=>

- /
c

0 1
.

1 2
String

2 8
(

8 9
)

9 :
)

: ;
;

; <

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% +
)+ ,
;, -

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .

DropColumn 
( 
$str #
,# $
$str% ,
), -
;- .
} 	
public!! 
override!! 
void!! 
Down!! !
(!!! "
)!!" #
{"" 	
	AddColumn## 
(## 
$str## "
,##" #
$str##$ +
,##+ ,
c##- .
=>##/ 1
c##2 3
.##3 4
String##4 :
(##: ;
)##; <
)##< =
;##= >
	AddColumn$$ 
($$ 
$str$$ "
,$$" #
$str$$$ +
,$$+ ,
c$$- .
=>$$/ 1
c$$2 3
.$$3 4
String$$4 :
($$: ;
)$$; <
)$$< =
;$$= >
	AddColumn%% 
(%% 
$str%% "
,%%" #
$str%%$ +
,%%+ ,
c%%- .
=>%%/ 1
c%%2 3
.%%3 4
String%%4 :
(%%: ;
)%%; <
)%%< =
;%%= >
	AddColumn&& 
(&& 
$str&& "
,&&" #
$str&&$ +
,&&+ ,
c&&- .
=>&&/ 1
c&&2 3
.&&3 4
String&&4 :
(&&: ;
)&&; <
)&&< =
;&&= >
	AddColumn'' 
('' 
$str'' "
,''" #
$str''$ +
,''+ ,
c''- .
=>''/ 1
c''2 3
.''3 4
String''4 :
('': ;
)''; <
)''< =
;''= >
	AddColumn(( 
((( 
$str(( "
,((" #
$str(($ +
,((+ ,
c((- .
=>((/ 1
c((2 3
.((3 4
String((4 :
(((: ;
)((; <
)((< =
;((= >
	AddColumn)) 
()) 
$str)) "
,))" #
$str))$ +
,))+ ,
c))- .
=>))/ 1
c))2 3
.))3 4
String))4 :
()): ;
))); <
)))< =
;))= >
	AddColumn** 
(** 
$str** "
,**" #
$str**$ +
,**+ ,
c**- .
=>**/ 1
c**2 3
.**3 4
String**4 :
(**: ;
)**; <
)**< =
;**= >
	AddColumn++ 
(++ 
$str++ "
,++" #
$str++$ +
,+++ ,
c++- .
=>++/ 1
c++2 3
.++3 4
String++4 :
(++: ;
)++; <
)++< =
;++= >
	AddColumn,, 
(,, 
$str,, "
,,," #
$str,,$ +
,,,+ ,
c,,- .
=>,,/ 1
c,,2 3
.,,3 4
String,,4 :
(,,: ;
),,; <
),,< =
;,,= >
	AddColumn-- 
(-- 
$str-- "
,--" #
$str--$ +
,--+ ,
c--- .
=>--/ 1
c--2 3
.--3 4
String--4 :
(--: ;
)--; <
)--< =
;--= >
	AddColumn.. 
(.. 
$str.. "
,.." #
$str..$ *
,..* +
c.., -
=>... 0
c..1 2
...2 3
String..3 9
(..9 :
)..: ;
)..; <
;..< =
	AddColumn// 
(// 
$str// "
,//" #
$str//$ *
,//* +
c//, -
=>//. 0
c//1 2
.//2 3
String//3 9
(//9 :
)//: ;
)//; <
;//< =
	AddColumn00 
(00 
$str00 "
,00" #
$str00$ *
,00* +
c00, -
=>00. 0
c001 2
.002 3
String003 9
(009 :
)00: ;
)00; <
;00< =
	AddColumn11 
(11 
$str11 "
,11" #
$str11$ *
,11* +
c11, -
=>11. 0
c111 2
.112 3
String113 9
(119 :
)11: ;
)11; <
;11< =
	AddColumn22 
(22 
$str22 "
,22" #
$str22$ *
,22* +
c22, -
=>22. 0
c221 2
.222 3
String223 9
(229 :
)22: ;
)22; <
;22< =
	AddColumn33 
(33 
$str33 "
,33" #
$str33$ *
,33* +
c33, -
=>33. 0
c331 2
.332 3
String333 9
(339 :
)33: ;
)33; <
;33< =
	AddColumn44 
(44 
$str44 "
,44" #
$str44$ *
,44* +
c44, -
=>44. 0
c441 2
.442 3
String443 9
(449 :
)44: ;
)44; <
;44< =
	AddColumn55 
(55 
$str55 "
,55" #
$str55$ *
,55* +
c55, -
=>55. 0
c551 2
.552 3
String553 9
(559 :
)55: ;
)55; <
;55< =
	AddColumn66 
(66 
$str66 "
,66" #
$str66$ *
,66* +
c66, -
=>66. 0
c661 2
.662 3
String663 9
(669 :
)66: ;
)66; <
;66< =

DropColumn77 
(77 
$str77 #
,77# $
$str77% *
)77* +
;77+ ,
}88 	
}99 
}:: –
HD:\calidad\HousesPeru\HousesPeru\Migrations\202005062121228_version_4.cs
	namespace 	

HousesPeru
 
. 

Migrations 
{ 
public 

partial 
class 
	version_4 "
:# $
DbMigration% 0
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
	AddColumn

 
(

 
$str

 #
,

# $
$str

% 3
,

3 4
c

5 6
=>

7 9
c

: ;
.

; <
String

< B
(

B C
)

C D
)

D E
;

E F
} 	
public 
override 
void 
Down !
(! "
)" #
{ 	

DropColumn 
( 
$str $
,$ %
$str& 4
)4 5
;5 6
} 	
} 
} ™
<D:\calidad\HousesPeru\HousesPeru\Migrations\Configuration.cs
	namespace 	

HousesPeru
 
. 

Migrations 
{ 
internal 
sealed 
class 
Configuration '
:( )%
DbMigrationsConfiguration* C
<C D

HousesPeruD N
.N O
DBO Q
.Q R
HousesInPeruContextR e
>e f
{		 
public

 
Configuration

 
(

 
)

 
{ 	&
AutomaticMigrationsEnabled &
=' (
false) .
;. /
} 	
	protected 
override 
void 
Seed  $
($ %

HousesPeru% /
./ 0
DB0 2
.2 3
HousesInPeruContext3 F
contextG N
)N O
{ 	
} 	
} 
} ˛
3D:\calidad\HousesPeru\HousesPeru\Models\Ciudades.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Ciudades 
{		 
public

 
int

 

CiudadesId

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
Inmueble 
> 
	Inmuebles '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ±
8D:\calidad\HousesPeru\HousesPeru\Models\DetalleCompra.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
DetalleCompra 
{		 
public

 
int

 
DetalleCompraId

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
string 
Monto 
{ 
get !
;! "
set# &
;& '
}( )
public 
Boolean 
? 
Pago 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
	UsuarioId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Usuario 
usuarios '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ´	
6D:\calidad\HousesPeru\HousesPeru\Models\Direcciones.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Direcciones 
{		 
public

 
int

 
DireccionesId

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
public 
string 
	Ubicacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Latitud 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Longitud 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 

InmuebleId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
Inmueble 
Inmueble  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ı
1D:\calidad\HousesPeru\HousesPeru\Models\Imagen.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Imagen 
{		 
public

 
int

 
ImagenId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
string 
Img 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

InmuebleId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Inmueble 
	Inmuebles  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} ®!
3D:\calidad\HousesPeru\HousesPeru\Models\Inmueble.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Inmueble 
{		 
public

 
int

 

InmuebleId

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
int 
	UsuarioId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
CiudadId 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
InmuebleTipoId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	NombreInm 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Area 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumHabitaciones %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Pisos 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Piso 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
PrecioVentaInm $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
PrecioAlquilerInm '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
UbicacionInm "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Ba√±os 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Garages 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
? 
FechaPublic $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 

NumCelular  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
Boolean 
? 

EstaActivo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Moneda 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Usuario 
Usuario &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
virtual 
Ciudades 
Ciudad  &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
virtual 
InmuebleTipo #
InmuebleTipo$ 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public   
virtual   
List   
<   
Imagen   "
>  " #
Imagenes  $ ,
{  - .
get  / 2
;  2 3
set  4 7
;  7 8
}  9 :
public!! 
virtual!! 
List!! 
<!! 
Direcciones!! '
>!!' (
Direcciones!!) 4
{!!5 6
get!!7 :
;!!: ;
set!!< ?
;!!? @
}!!A B
}$$ 
}%% ü
7D:\calidad\HousesPeru\HousesPeru\Models\InmuebleTipo.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
InmuebleTipo 
{		 
public

 
int

 
InmuebleTipoId

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
List 
< 
Inmueble $
>$ %
	Inmuebles& /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
} 
} ∫
/D:\calidad\HousesPeru\HousesPeru\Models\Plan.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Plan 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Precio 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
List 
< 
Usuario #
># $
Usuarios% -
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
} 
} ≥
2D:\calidad\HousesPeru\HousesPeru\Models\Usuario.cs
	namespace 	

HousesPeru
 
. 
Models 
{ 
public 

class 
Usuario 
{		 
public

 
int

 
	UsuarioId

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	ApellidoP 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
	ApellidoM 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
? 
FechaNacimiento (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Sexo 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
TipoUsuario !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ImagenPerfil "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FechaInicioPlan '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DateTime 
? 
FechaFinPlan %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 
PlanId 
{ 
get 
;  
set! $
;$ %
}& '
public 
virtual 
Plan 
Plan  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
virtual 
List 
< 
Inmueble $
>$ %
	Inmuebles& /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
virtual 
List 
< 
DetalleCompra )
>) *
DetalleCompras+ 9
{: ;
get< ?
;? @
setA D
;D E
}F G
} 
} Ê
;D:\calidad\HousesPeru\HousesPeru\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str %
)% &
]& '
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str '
)' (
]( )
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *÷
8D:\calidad\HousesPeru\HousesPeru\services\AuthService.cs
	namespace		 	

HousesPeru		
 
.		 
services		 
{

 
public 

	interface 
IAuthService !
{ 
Usuario 
Login 
( 
Usuario 
usuario %
)% &
;& '
void 
Logout 
( 
) 
; 
Usuario 
GetLogedUser 
( 
) 
; 
} 
public 

class 
AuthService 
: 
IAuthService +
{ 
HousesInPeruContext 
context #
;# $
public 
AuthService 
( 
HousesInPeruContext .
context/ 6
)6 7
{8 9
this 
. 
context 
= 
context 
; 
} 	
public 
Usuario 
GetLogedUser #
(# $
)$ %
{ 	
return 
( 
Usuario 
) 
HttpContext '
.' (
Current( /
./ 0
Session0 7
[7 8
$str8 A
]A B
;B C
} 	
public 
Usuario 
Login 
( 
Usuario $
usuario% ,
), -
{ 	
Usuario 
user 
= 
context "
." #
Usuarios# +
.+ ,
Where, 1
(1 2
x2 3
=>4 6
x7 8
.8 9
Email9 >
==? A
usuarioB I
.I J
EmailJ O
&&P R
xS T
.T U
PasswordU ]
==^ `
usuarioa h
.h i
Passwordi q
)q r
.r s
FirstOrDefault	s Å
(
Å Ç
)
Ç É
;
É Ñ
if 
( 
user 
!= 
null 
) 
{   
FormsAuthentication!! #
.!!# $
SetAuthCookie!!$ 1
(!!1 2
usuario!!2 9
.!!9 :
Email!!: ?
,!!? @
false!!A F
)!!F G
;!!G H
HttpContext"" 
."" 
Current"" #
.""# $
Session""$ +
[""+ ,
$str"", 5
]""5 6
=""7 8
usuario""9 @
;""@ A
return## 
user## 
;## 
}%% 
;%% 
throw&& 
new&& #
NotImplementedException&& -
(&&- .
)&&. /
;&&/ 0
}(( 	
public** 
void** 
Logout** 
(** 
)** 
{++ 	
FormsAuthentication,, 
.,,  
SignOut,,  '
(,,' (
),,( )
;,,) *
}-- 	
public.. 
struct.. 
User.. 
{// 	
public00 
const00 
string00 
USUARIO00  '
=00( )
$str00* 3
;003 4
}11 	
}44 
}77 ¿

:D:\calidad\HousesPeru\HousesPeru\services\CiudadService.cs
	namespace 	

HousesPeru
 
. 
services 
{		 
public

 

	interface

 
ICiudadService

 #
{ 
IEnumerable 
< 
Ciudades 
> 
GetCiudades )
() *
)* +
;+ ,
} 
public 

class 
CiudadService 
: 
ICiudadService -
{ 
private 
readonly 
HousesInPeruContext ,
_db- 0
;0 1
public 
CiudadService 
( 
HousesInPeruContext 0
_db1 4
)4 5
{6 7
this 
. 
_db 
= 
_db 
; 
} 	
public 
IEnumerable 
< 
Ciudades #
># $
GetCiudades% 0
(0 1
)1 2
{ 	
var 
ciudades 
= 
_db 
. 
Ciudades %
.% &
ToList& ,
(, -
)- .
;. /
return 
ciudades 
; 
} 	
} 
} Ü
>D:\calidad\HousesPeru\HousesPeru\services\CloudinaryService.cs
	namespace 	

HousesPeru
 
. 
services 
{		 
public

 

	interface

 
ICloudinaryService

 '
{ 
string 
	uploadImg 
( 
HttpPostedFileBase +
	imagePath, 5
)5 6
;6 7
} 
public 

class 
CloudinaryService "
:" #
ICloudinaryService$ 6
{ 
public 
static 

Cloudinary  

cloudinary! +
;+ ,
Account 
account 
= 
new 
Account %
(% &
$str 
, 
$str !
,! "
$str -
) 
; 
public 
CloudinaryService  
(  !
)! "
{ 	

cloudinary 
= 
new 

Cloudinary '
(' (
account( /
)/ 0
;0 1
} 	
public 
string 
	uploadImg 
(  
HttpPostedFileBase  2
	imagePath3 <
)< =
{ 	
var 
	uploadImg 
= 
new  #
ImageUploadParams$ 5
(5 6
)6 7
{ 
File   
=   
new   
FileDescription   .
(  . /
	imagePath  / 8
.  8 9
FileName  9 A
,  A B
	imagePath  B K
.  K L
InputStream  L W
)  W X
}!! 
;!! 
var## 
uploadResult##  
=##! "

cloudinary### -
.##- .
Upload##. 4
(##4 5
	uploadImg##5 >
)##> ?
.##? @
Uri##@ C
;##C D
var$$ 
dato$$ 
=$$ 
uploadResult$$ '
;$$' (
return%% 
dato%% 
.%% 
ToString%% $
(%%$ %
)%%% &
;%%& '
}(( 	
})) 
},, æ;
:D:\calidad\HousesPeru\HousesPeru\services\ImagenService.cs
	namespace

 	

HousesPeru


 
.

 
services

 
{ 
public 

	interface 
IImageService "
{ 
void 
	AddImagen 
( 
List 
< 
HttpPostedFileBase .
>. /
imagen0 6
,6 7
int8 ;

idInmueble< F
)F G
;G H
IEnumerable 
< 
Imagen 
> 
GetImagenes '
(' (
)( )
;) *
Imagen #
GetImagenesByInmuebleId &
(& '
int' *

InmuebleId+ 5
)5 6
;6 7
IEnumerable 
< 
Imagen 
> &
GetAllImagenesByInmuebleID 6
(6 7
int7 :

InmuebleId; E
)E F
;F G
void 
DelImg 
( 
int 
id 
) 
; 
List 
< 

JsonImagen 
> 

getAllImgs #
(# $
)$ %
;% &
} 
public 

class 
ImagenService 
: 
IImageService ,
{ 
public 
readonly 
HousesInPeruContext +
_db, /
;/ 0
public 
readonly 
ICloudinaryService *
cloudService+ 7
;7 8
public 
ImagenService 
( 
HousesInPeruContext 0
_db1 4
,4 5
ICloudinaryService5 G
cloudServiceH T
)T U
{ 	
this 
. 
_db 
= 
_db 
; 
this 
. 
cloudService 
= 
cloudService  ,
;, -
} 	
public 
void 
	AddImagen 
( 
List "
<" #
HttpPostedFileBase# 5
>5 6
imagen7 =
,= >
int? B

idInmuebleC M
)M N
{O P
foreach!! 
(!! 
var!! 
imgs!! 
in!!  
imagen!!! '
)!!' (
{!!) *
var"" 
img"" 
="" 
new"" 
Imagen"" $
(""$ %
)""% &
;""& '
if## 
(## 
imgs## 
!=## 
null## 
)##  
{##! "
img%% 
.%% 

InmuebleId%% "
=%%# $

idInmueble%%% /
;%%/ 0
var&& 
	imgupload&& !
=&&" #
cloudService&&$ 0
.&&0 1
	uploadImg&&1 :
(&&: ;
imgs&&; ?
)&&? @
;&&@ A
img'' 
.'' 
Img'' 
='' 
	imgupload'' '
;''' (
_db(( 
.(( 
Imagens(( 
.((  
Add((  #
(((# $
img(($ '
)((' (
;((( )
_db)) 
.)) 
SaveChanges)) #
())# $
)))$ %
;))% &
}** 
}++ 
}// 	
public00 
IEnumerable00 
<00 
Imagen00 !
>00! "
GetImagenes00# .
(00. /
)00/ 0
{11 	
return22 
_db22 
.22 
Imagens22 
.22 
ToList22 %
(22% &
)22& '
;22' (
}33 	
public55 
Imagen55 #
GetImagenesByInmuebleId55 -
(55- .
int55. 1

InmuebleId552 <
)55= >
{55? @
return77 
_db77 
.77 
Imagens77 
.77 
Where77 $
(77$ %
x77% &
=>77' )
x77* +
.77+ ,

InmuebleId77, 6
==777 9

InmuebleId77: D
)77D E
.77E F
FirstOrDefault77F T
(77T U
)77U V
;77W X
}99 	
public:: 
IEnumerable:: 
<:: 
Imagen:: !
>::! "&
GetAllImagenesByInmuebleID::# =
(::= >
int::> A

InmuebleId::B L
)::L M
{::N O
return<< 
_db<< 
.<< 
Imagens<< 
.<< 
Where<< $
(<<$ %
x<<% &
=><<' )
x<<* +
.<<+ ,

InmuebleId<<, 6
==<<7 9

InmuebleId<<: D
)<<D E
.<<E F
ToList<<F L
(<<L M
)<<M N
;<<N O
}== 	
public?? 
void?? 
DelImg?? 
(?? 
int?? 
id?? !
)??! "
{@@ 	
varAA 
imgAA 
=AA 
_dbAA 
.AA 
ImagensAA 
.AA  
WhereAA  %
(AA% &
xAA& '
=>AA( *
xAA+ ,
.AA, -
ImagenIdAA- 5
==AA6 8
idAA9 ;
)AA; <
.AA< =
FirstOrDefaultAA= K
(AAK L
)AAL M
;AAM N
_dbBB 
.BB 
ImagensBB 
.BB 
RemoveBB 
(BB 
imgBB "
)BB" #
;BB# $
_dbCC 
.CC 
SaveChangesCC 
(CC 
)CC 
;CC 
}DD 	
publicFF 
ListFF 
<FF 

JsonImagenFF 
>FF 

getAllImgsFF  *
(FF* +
)FF+ ,
{FF- .
varGG 
idinmGG 
=GG 
_dbGG 
.GG 
	InmueblesGG %
.GG% &
SelectGG& ,
(GG, -
xGG- .
=>GG/ 1
xGG2 3
.GG3 4

InmuebleIdGG4 >
)GG> ?
.GG? @
ToListGG@ F
(GGF G
)GGG H
;GGH I
varHH 
idimgHH 
=HH 
newHH 
ListHH  
<HH  !

JsonImagenHH! +
>HH+ ,
(HH, -
)HH- .
;HH. /
foreachII 
(II 
varII 
datII 
inII 
idinmII  %
)II% &
{JJ 
varKK 
listimgKK 
=KK 
newKK !

JsonImagenKK" ,
(KK, -
)KK- .
;KK. /
varLL 
imgLL 
=LL 
_dbLL 
.LL 
ImagensLL $
.LL$ %
WhereLL% *
(LL* +
xLL+ ,
=>LL- /
xLL0 1
.LL1 2

InmuebleIdLL2 <
==LL= ?
datLL@ C
)LLC D
.LLD E
FirstOrDefaultLLE S
(LLS T
)LLT U
;LLU V
listimgMM 
.MM 
ImagenIdMM  
=MM! "
imgMM# &
.MM& '
ImagenIdMM' /
;MM/ 0
listimgNN 
.NN 
ImgNN 
=NN 
imgNN !
.NN! "
ImgNN" %
;NN% &
listimgOO 
.OO 

InmuebleIdOO "
=OO# $
imgOO% (
.OO( )

InmuebleIdOO) 3
;OO3 4
idimgQQ 
.QQ 
AddQQ 
(QQ 
listimgQQ !
)QQ! "
;QQ" #
}RR 
returnTT 
idimgTT 
.TT 
ToListTT 
(TT  
)TT  !
;TT" #
}XX 	
}YY 
}\\ ºi
<D:\calidad\HousesPeru\HousesPeru\services\InmuebleService.cs
	namespace		 	

HousesPeru		
 
.		 
services		 
{

 
public 

	interface 
IInmuebleService %
{ 
void 
AddInmueble 
( 
Inmueble !
inmueble" *
)* +
;+ ,
IEnumerable 
< 
Inmueble 
> 
GetInmubles )
() *
)* +
;+ ,
Inmueble 
GetInmuebleById  
(  !
int! $

idInmueble% /
)/ 0
;0 1
IEnumerable 
< 
Inmueble 
> !
GetInmueblesByUsuario 3
(3 4
int4 7
	UsuarioId8 A
)A B
;B C
IEnumerable 
< 
Inmueble 
> 
BuscarInmueble ,
(, -
int- 0
ciudad1 7
,7 8
int9 <
TipoInmueble= I
,I J
stringK Q
EstadoR X
)X Y
;Y Z
void 
EditarInmueble 
( 
int 

idInmueble  *
,* +
Inmueble, 4
inmueble5 =
)= >
;> ?
} 
public 

class 
InmuebleService  
:  !
IInmuebleService! 1
{ 
HousesInPeruContext 
_db 
;  
public 
InmuebleService 
( 
HousesInPeruContext 2
_db3 6
)6 7
{8 9
this 
. 
_db 
= 
_db 
; 
} 	
public 
void 
AddInmueble 
(  
Inmueble  (
inmueble) 1
)1 2
{ 	
_db 
. 
	Inmuebles 
. 
Add 
( 
inmueble &
)& '
;' (
_db 
. 
SaveChanges 
( 
) 
; 
}   	
public"" 
IEnumerable"" 
<"" 
Inmueble"" #
>""# $
BuscarInmueble""% 3
(""3 4
int""4 7
ciudad""8 >
,""> ?
int""@ C
TipoInmueble""D P
,""P Q
string""R X
Estado""Y _
)""_ `
{## 	
var$$ 
	inmuebles$$ 
=$$ 
new$$ 
Inmueble$$  (
($$( )
)$$) *
;$$* +
if%% 
(%% 
ciudad%% 
!=%% 
$num%% 
&&%% 
TipoInmueble%% )
==%%) +
$num%%+ ,
&&%%- /
Estado%%0 6
==%%6 8
$str%%8 ;
)%%; <
{%%= >
return&& 
_db&& 
.&& 
	Inmuebles&& $
.&&$ %
Where&&% *
(&&* +
x&&+ ,
=>&&- /
x&&0 1
.&&1 2
CiudadId&&2 :
==&&; =
ciudad&&> D
)&&D E
.&&E F
ToList&&F L
(&&L M
)&&M N
;&&N O
}'' 
if(( 
((( 
ciudad(( 
!=(( 
$num(( 
&&(( 
TipoInmueble(( +
!=((, .
$num((/ 0
&&((1 3
Estado((4 :
==((; =
$str((> A
)((A B
{((C D
return)) 
_db)) 
.)) 
	Inmuebles)) $
.))$ %
Where))% *
())* +
x))+ ,
=>))- /
x))0 1
.))1 2
InmuebleTipoId))2 @
==))A C
TipoInmueble))D P
&&))Q S
x))T U
.))U V
InmuebleTipoId))V d
==))d f
TipoInmueble))g s
)))s t
.))t u
ToList))u {
()){ |
)))| }
;))} ~
}** 
if++ 
(++ 
ciudad++ 
!=++ 
$num++ 
&&++ 
TipoInmueble++ +
!=++, .
$num++/ 0
&&++1 3
Estado++4 :
!=++; =
$str++> A
)++A B
{,, 
if-- 
(-- 
Estado-- 
==-- 
$str-- (
)--( )
{--* +
return.. 
_db.. 
... 
	Inmuebles.. (
...( )
Where..) .
(... /
x../ 0
=>..1 3
x..4 5
...5 6
CiudadId..6 >
==..? A
ciudad..B H
&&..I K
x..L M
...M N
InmuebleTipoId..N \
==..] _
TipoInmueble..` l
&&..m o
x..p q
...q r
PrecioAlquilerInm	..r É
!=
..Ñ Ü
null
..á ã
)
..ã å
.
..å ç
ToList
..ç ì
(
..ì î
)
..î ï
;
..ï ñ
}// 
else// 
{// 
return00 
_db00 
.00 
	Inmuebles00 (
.00( )
Where00) .
(00. /
x00/ 0
=>001 3
x004 5
.005 6
CiudadId006 >
==00? A
ciudad00B H
&&00I K
x00L M
.00M N
InmuebleTipoId00N \
==00] _
TipoInmueble00` l
&&00m o
x00p q
.00q r
PrecioVentaInm	00r Ä
!=
00Å É
null
00Ñ à
)
00à â
.
00â ä
ToList
00ä ê
(
00ê ë
)
00ë í
;
00í ì
}11 
}33 
if44 
(44 
ciudad44 
==44 
$num44 
&&44 
TipoInmueble44 +
!=44, .
$num44/ 0
&&441 3
Estado444 :
==44; =
$str44> A
)44A B
{55 
return66 
_db66 
.66 
	Inmuebles66 $
.66$ %
Where66% *
(66* +
x66+ ,
=>66- /
x660 1
.661 2
InmuebleTipoId662 @
==66A C
TipoInmueble66D P
)66P Q
.66Q R
ToList66R X
(66X Y
)66Y Z
;66Z [
}77 
if88 
(88 
ciudad88 
==88 
$num88 
&&88 
TipoInmueble88 +
!=88, .
$num88/ 0
&&881 3
Estado884 :
!=88; =
$str88> A
)88A B
{99 
if:: 
(:: 
Estado:: 
==:: 
$str:: (
)::( )
{;; 
return<< 
_db<< 
.<< 
	Inmuebles<< (
.<<( )
Where<<) .
(<<. /
x<</ 0
=><<0 2
x<<3 4
.<<4 5
InmuebleTipoId<<5 C
==<<D F
TipoInmueble<<G S
&&<<T V
x<<W X
.<<X Y
PrecioAlquilerInm<<Y j
!=<<k m
null<<n r
)<<r s
.<<s t
ToList<<t z
(<<z {
)<<{ |
;<<| }
}== 
else>> 
{?? 
return@@ 
_db@@ 
.@@ 
	Inmuebles@@ (
.@@( )
Where@@) .
(@@. /
x@@/ 0
=>@@1 3
x@@4 5
.@@5 6
InmuebleTipoId@@6 D
==@@E G
TipoInmueble@@H T
&&@@U W
x@@X Y
.@@Y Z
PrecioVentaInm@@Z h
!=@@i k
null@@l p
)@@p q
.@@q r
ToList@@r x
(@@x y
)@@y z
;@@z {
}AA 
}BB 
ifCC 
(CC 
ciudadCC 
==CC 
$numCC 
&&CC 
TipoInmuebleCC +
==CC, .
$numCC/ 0
&&CC1 3
EstadoCC4 :
!=CC; =
$strCC> A
)CCA B
{DD 
ifEE 
(EE 
EstadoEE 
==EE 
$strEE (
)EE( )
{FF 
returnGG 
_dbGG 
.GG 
	InmueblesGG (
.GG( )
WhereGG) .
(GG. /
xGG/ 0
=>GG1 3
xGG4 5
.GG5 6
PrecioAlquilerInmGG6 G
!=GGH J
nullGGK O
)GGO P
.GGP Q
ToListGGQ W
(GGW X
)GGX Y
;GGY Z
}HH 
elseII 
{JJ 
returnKK 
_dbKK 
.KK 
	InmueblesKK (
.KK( )
WhereKK) .
(KK. /
xKK/ 0
=>KK1 3
xKK4 5
.KK5 6
PrecioVentaInmKK6 D
!=KKE G
nullKKH L
)KKL M
.KKM N
ToListKKN T
(KKT U
)KKU V
;KKV W
}LL 
}MM 
returnPP 
_dbPP 
.PP 
	InmueblesPP $
.PP$ %
ToListPP% +
(PP+ ,
)PP, -
;PP- .
}TT 	
publicVV 
voidVV 
EditarInmuebleVV "
(VV" #
intVV# &

idInmuebleVV' 1
,VV1 2
InmuebleVV3 ;
inmuebleVV< D
)VVD E
{WW 	
varXX 
inmXX 
=XX 
_dbXX 
.XX 
	InmueblesXX #
.XX# $
WhereXX$ )
(XX) *
xXX* +
=>XX+ -
xXX- .
.XX. /

InmuebleIdXX/ 9
==XX9 ;

idInmuebleXX< F
)XXF G
.XXG H
FirstOrDefaultXXH V
(XXV W
)XXW X
;XXX Y
inmYY 
.YY 
CiudadIdYY 
=YY 
inmuebleYY #
.YY# $
CiudadIdYY$ ,
;YY, -
inmZZ 
.ZZ 
InmuebleTipoIdZZ 
=ZZ  
inmuebleZZ! )
.ZZ) *
InmuebleTipoIdZZ* 8
;ZZ8 9
inm[[ 
.[[ 
	NombreInm[[ 
=[[ 
inmueble[[ $
.[[$ %
	NombreInm[[% .
;[[. /
inm\\ 
.\\ 
Area\\ 
=\\ 
inmueble\\ 
.\\  
Area\\  $
;\\$ %
inm]] 
.]] 
NumHabitaciones]] 
=]]  !
inmueble]]" *
.]]* +
NumHabitaciones]]+ :
;]]: ;
inm^^ 
.^^ 
Pisos^^ 
=^^ 
inmueble^^  
.^^  !
Pisos^^! &
;^^& '
inm__ 
.__ 
Piso__ 
=__ 
inmueble__ 
.__  
Piso__  $
;__$ %
inm`` 
.`` 
PrecioVentaInm`` 
=``  
inmueble``! )
.``) *
PrecioVentaInm``* 8
;``8 9
inmaa 
.aa 
PrecioAlquilerInmaa !
=aa" #
inmuebleaa$ ,
.aa, -
PrecioAlquilerInmaa- >
;aa> ?
inmbb 
.bb 
UbicacionInmbb 
=bb 
inmueblebb '
.bb' (
UbicacionInmbb( 4
;bb4 5
inmcc 
.cc 
Ba√±oscc 
=cc 
inmueblecc  
.cc  !
Ba√±oscc! &
;cc& '
inmdd 
.dd 
Garagesdd 
=dd 
inmuebledd "
.dd" #
Garagesdd# *
;dd* +
inmee 
.ee 
Descripcionee 
=ee 
inmuebleee &
.ee& '
Descripcionee' 2
;ee2 3
inmff 
.ff 

NumCelularff 
=ff 
inmuebleff %
.ff% &

NumCelularff& 0
;ff0 1
inmgg 
.gg 
Monedagg 
=gg 
inmueblegg !
.gg! "
Monedagg" (
;gg( )
_dbjj 
.jj 
SaveChangesjj 
(jj 
)jj 
;jj 
}kk 	
publicmm 
IEnumerablemm 
<mm 
Inmueblemm #
>mm# $
GetInmublesmm% 0
(mm0 1
)mm1 2
{nn 	
returnoo 
_dboo 
.oo 
	Inmueblesoo  
.oo  !
ToListoo! '
(oo' (
)oo( )
.oo) *
OrderByDescendingoo* ;
(oo; <
xoo< =
=>oo= ?
xoo? @
.oo@ A

InmuebleIdooA K
)ooK L
;ooL M
}qq 	
publicss 
Inmuebless 
GetInmuebleByIdss '
(ss' (
intss( +

idInmuebless, 6
)ss6 7
{tt 	
returnuu 
_dbuu 
.uu 
	Inmueblesuu  
.uu  !
Whereuu! &
(uu& '
xuu' (
=>uu( *
xuu* +
.uu+ ,

InmuebleIduu, 6
==uu7 9

idInmuebleuu: D
)uuD E
.uuE F
FirstOrDefaultuuF T
(uuT U
)uuU V
;uuV W
}vv 	
publicxx 
IEnumerablexx 
<xx 
Inmueblexx #
>xx# $!
GetInmueblesByUsuarioxx% :
(xx: ;
intxx; >
	UsuarioIdxx? H
)xxH I
{yy 	
return{{ 
_db{{ 
.{{ 
	Inmuebles{{  
.{{  !
Where{{! &
({{& '
x{{' (
=>{{) +
x{{, -
.{{- .
	UsuarioId{{. 7
=={{8 :
	UsuarioId{{; D
){{D E
.{{E F
ToList{{F L
({{L M
){{M N
;{{N O
}}} 	
}~~ 
}ÅÅ Û

@D:\calidad\HousesPeru\HousesPeru\services\InmuebleTipoService.cs
	namespace 	

HousesPeru
 
. 
services 
{		 
public

 

	interface

  
IInmuebleTipoService

 )
{ 
IEnumerable 
< 
InmuebleTipo  
>  !
getInmuebleTipos" 2
(2 3
)3 4
;4 5
} 
public 

class 
InmuebleTipoService $
:$ % 
IInmuebleTipoService% 9
{ 
private 
readonly 
HousesInPeruContext ,
_db- 0
;0 1
public 
InmuebleTipoService "
(" #
HousesInPeruContext# 6
_db7 :
): ;
{< =
this 
. 
_db 
= 
_db 
; 
} 	
public 
IEnumerable 
< 
InmuebleTipo '
>' (
getInmuebleTipos) 9
(9 :
): ;
{ 	
var 
InmTipo 
= 
_db 
. 
InmuebleTipos )
.) *
ToList* 0
(0 1
)1 2
;2 3
return 
InmTipo 
; 
} 	
} 
} ‰
8D:\calidad\HousesPeru\HousesPeru\services\PlanService.cs
	namespace

 	

HousesPeru


 
.

 
services

 
{ 
public 

	interface 
IPlanService !
{ 
IEnumerable 
< 
Plan 
> 
getPlans "
(" #
)# $
;$ %
Plan 
getPlanById 
( 
int 
id 
)  
;  !
PlanViewModel 
FechaFinPlan "
(" #
int# &
idPlan' -
,- .
DateTime/ 7
FechaInicio8 C
)C D
;D E
} 
public 

class 
PlanService 
: 
IPlanService )
{ 
HousesInPeruContext 
_db 
;  
public 
PlanService 
( 
HousesInPeruContext .
db/ 1
)1 2
{3 4
this 
. 
_db 
= 
db 
; 
} 	
public 
Plan 
getPlanById 
(  
int  #
id$ &
)& '
{ 	
var 
plan 
= 
_db 
. 
Plans  
.  !
Where! &
(& '
x' (
=>) +
x, -
.- .
Id. 0
==1 3
id4 6
)6 7
.7 8
FirstOrDefault8 F
(F G
)G H
;H I
return 
plan 
; 
} 	
public 
PlanViewModel 
FechaFinPlan )
() *
int* -
idPlan. 4
,4 5
DateTime6 >
FechaInicio? J
)J K
{L M
var 
Plan 
= 
new 
PlanViewModel (
(( )
)) *
;* +
if   
(   
idPlan   
==   
$num   
)   
{   
Plan!! 
.!! 
FechaFin!! 
=!! 
FechaInicio!!  +
.!!+ ,
	AddMonths!!, 5
(!!5 6
$num!!6 7
)!!7 8
;!!8 9
}"" 
if## 
(## 
idPlan## 
==## 
$num## 
)## 
{## 
Plan$$ 
.$$ 
FechaFin$$ 
=$$ 
FechaInicio$$  +
.$$+ ,
	AddMonths$$, 5
($$5 6
$num$$6 7
)$$7 8
;$$8 9
}%% 
if&& 
(&& 
idPlan&& 
==&& 
$num&& 
)&& 
{&& 
Plan'' 
.'' 
FechaFin'' 
='' 
FechaInicio''  +
.''+ ,
AddYears'', 4
(''4 5
$num''5 6
)''6 7
;''7 8
}(( 
return)) 
Plan)) 
;)) 
}++ 	
public,, 
IEnumerable,, 
<,, 
Plan,, 
>,,  
getPlans,,! )
(,,) *
),,* +
{-- 	
var.. 
plans.. 
=.. 
_db.. 
... 
Plans.. 
...  
ToList..  &
(..& '
)..' (
;..( )
return// 
plans// 
;// 
}00 	
}11 
}44 ©
?D:\calidad\HousesPeru\HousesPeru\services\PublicacionService.cs
	namespace 	

HousesPeru
 
. 
services 
{		 
public

 

	interface

 
IPublicacionService

 (
{ 
void 
addPublicacion 
( 
Usuario #
user$ (
)( )
;) *
} 
public 

class 
PublicacionService #
:# $
IPublicacionService$ 7
{ 
readonly 
HousesInPeruContext $
db% '
;' (
public 
PublicacionService !
(! "
HousesInPeruContext" 5
db6 8
)8 9
{ 	
this 
. 
db 
= 
db 
; 
} 	
public 
void 
addPublicacion "
(" #
Usuario# *
user+ /
)/ 0
{ 	
}66 	
}99 
}<< ﬂJ
;D:\calidad\HousesPeru\HousesPeru\services\SessionService.cs
	namespace 	

HousesPeru
 
. 
services 
{		 
public

 

	interface

 
ISessionService

 $
{ 
void 
GuardarSession 
( 
Usuario #
usuario$ +
)+ ,
;, -
void 
LimpiarSession 
( 
) 
; 
bool 
IsLogged 
( 
) 
; 
bool 
EsAdmin 
( 
) 
; 
bool 
EsAgente 
( 
) 
; 
bool 
	EsUsuario 
( 
) 
; 
bool 
EsSuSession 
( 
int 
? 
	IdUsuario '
)' (
;( )
int $
ConvertirSessionIdAIntId $
($ %
)% &
;& '
void $
GuardarInmuebleEnSession %
(% &
List& *
<* +
Inmueble+ 3
>3 4
	inmuebles5 >
)> ?
;? @
List 
< 
Inmueble 
> %
RetornarInmuebleDeSession 0
(0 1
)1 2
;2 3
} 
public 

class 
SessionService 
:  
ISessionService  /
{ 
private 
readonly 
HttpContext $
contexto% -
;- .
private 
readonly 
UsuarioService '
UserServ( 0
;0 1
public 
SessionService 
( 
) 
{  !
contexto 
= 
HttpContext "
." #
Current# *
;* +
HousesInPeruContext 
conexion  (
=) *
new+ .
HousesInPeruContext/ B
(B C
)C D
;D E
UserServ 
= 
new 
UsuarioService )
() *
conexion* 2
)2 3
;3 4
} 	
public   
void   
GuardarSession   "
(  " #
Usuario  # *
usuario  + 2
)  2 3
{!! 	
contexto"" 
."" 
Session"" 
["" 
$str"" (
]""( )
="") *
usuario""+ 2
.""2 3
	UsuarioId""3 <
.""< =
ToString""= E
(""E F
)""F G
;""G H
contexto## 
.## 
Session## 
[## 
$str## %
]##% &
=##' (
usuario##) 0
.##0 1
Nombre##1 7
.##7 8
ToString##8 @
(##@ A
)##A B
;##B C
contexto$$ 
.$$ 
Session$$ 
[$$ 
$str$$ (
]$$( )
=$$* +
usuario$$, 3
.$$3 4
	ApellidoP$$4 =
.$$= >
ToString$$> F
($$F G
)$$G H
;$$H I
contexto%% 
.%% 
Session%% 
[%% 
$str%% *
]%%* +
=%%, -
usuario%%. 5
.%%5 6
TipoUsuario%%6 A
.%%A B
ToString%%B J
(%%J K
)%%K L
;%%L M
contexto&& 
.&& 
Session&& 
[&& 
$str&& '
]&&' (
=&&) *
null&&* .
;&&. /
}(( 	
public)) 
void)) 
LimpiarSession)) "
())" #
)))# $
{))% &
contexto** 
.** 
Session** 
.** 
Clear** "
(**" #
)**# $
;**$ %
}++ 	
public,, 
bool,, 
IsLogged,, 
(,, 
),, 
{-- 	
if.. 
(.. 
contexto.. 
... 
Session..  
[..  !
$str..! ,
].., -
!=... 0
null..1 5
&&..6 8
contexto..9 A
...A B
Session..B I
[..I J
$str..J W
]..W X
!=..Y [
null..\ `
)..` a
return// 
true// 
;// 
return00 
false00 
;00 
}11 	
public22 
bool22 
EsAdmin22 
(22 
)22 
{33 	
if44 
(44 
IsLogged44 
(44 
)44 
)44 
{55 
int66 
	UsuarioId66 
=66 
Convert66 &
.66& '
ToInt3266' .
(66. /
contexto66/ 7
.667 8
Session668 ?
[66? @
$str66@ K
]66K L
)66L M
;66M N
Usuario77 
usuario77 
=77  !
UserServ77" *
.77* +
GetUsuarioByID77+ 9
(779 :
	UsuarioId77: C
)77C D
;77D E
if88 
(88 
usuario88 
.88 
TipoUsuario88 '
==88( *
$str88+ :
)88: ;
return99 
true99 
;99  
};; 
return;; 
false;; 
;;; 
}== 	
public>> 
bool>> 
EsAgente>> 
(>> 
)>> 
{?? 	
if@@ 
(@@ 
IsLogged@@ 
(@@ 
)@@ 
)@@ 
{AA 
intBB 
	UsuarioIdBB 
=BB 
ConvertBB  '
.BB' (
ToInt32BB( /
(BB/ 0
contextoBB0 8
.BB8 9
SessionBB9 @
[BB@ A
$strBBA L
]BBL M
)BBM N
;BBN O
UsuarioCC 
usuarioCC 
=CC  !
UserServCC" *
.CC* +
GetUsuarioByIDCC+ 9
(CC9 :
	UsuarioIdCC: C
)CCC D
;CCD E
ifDD 
(DD 
usuarioDD 
.DD 
TipoUsuarioDD '
==DD( *
$strDD+ 3
)DD3 4
returnEE 
trueEE 
;EE  
}GG 
returnHH 
falseHH 
;HH 
}JJ 	
publicKK 
boolKK 
	EsUsuarioKK 
(KK 
)KK 
{LL 	
ifMM 
(MM 
IsLoggedMM 
(MM 
)MM 
)MM 
{NN 
intOO 
	UsuarioIdOO 
=OO 
ConvertOO  '
.OO' (
ToInt32OO( /
(OO/ 0
contextoOO0 8
.OO8 9
SessionOO9 @
[OO@ A
$strOOA L
]OOL M
)OOM N
;OON O
UsuarioPP 
usuarioPP 
=PP  !
UserServPP" *
.PP* +
GetUsuarioByIDPP+ 9
(PP9 :
	UsuarioIdPP: C
)PPC D
;PPD E
ifQQ 
(QQ 
usuarioQQ 
.QQ 
TipoUsuarioQQ '
==QQ( *
$strQQ+ 4
)QQ4 5
returnRR 
trueRR 
;RR  
}TT 
returnUU 
falseUU 
;UU 
}WW 	
publicXX 
boolXX 
EsSuSessionXX 
(XX  
intXX  #
?XX# $
	IdUsuarioXX% .
)XX. /
{YY 	
ifZZ 
(ZZ 
IsLoggedZZ 
(ZZ 
)ZZ 
)ZZ 
{[[ 
int\\ 
	UsuarioId\\ 
=\\ 
Convert\\  '
.\\' (
ToInt32\\( /
(\\/ 0
contexto\\0 8
.\\8 9
Session\\9 @
[\\@ A
$str\\A L
]\\L M
)\\M N
;\\N O
if]] 
(]] 
	UsuarioId]] 
!=]]  
	IdUsuario]]! *
)]]* +
return^^ 
false^^  
;^^  !
}__ 
return`` 
true`` 
;`` 
}bb 	
publiccc 
intcc $
ConvertirSessionIdAIntIdcc +
(cc+ ,
)cc, -
{dd 	
intee 
	UsuarioIdee 
=ee 
Convertee #
.ee# $
ToInt32ee$ +
(ee+ ,
contextoee, 4
.ee4 5
Sessionee5 <
[ee< =
$stree= H
]eeH I
)eeI J
;eeJ K
returnff 
	UsuarioIdff 
;ff 
}gg 	
publichh 
voidhh $
GuardarInmuebleEnSessionhh ,
(hh, -
Listhh- 1
<hh1 2
Inmueblehh2 :
>hh: ;
	inmuebleshh< E
)hhE F
{ii 	
contextojj 
.jj 
Sessionjj 
[jj 
$strjj '
]jj' (
=jj) *
	inmueblesjj+ 4
;jj4 5
}kk 	
publicll 
Listll 
<ll 
Inmueblell 
>ll %
RetornarInmuebleDeSessionll 7
(ll7 8
)ll8 9
{mm 	
Listnn 
<nn 
Inmueblenn 
>nn 
	inmueblesnn $
=nn% &
(nn' (
Listnn( ,
<nn, -
Inmueblenn- 5
>nn5 6
)nn6 7
contextonn7 ?
.nn? @
Sessionnn@ G
[nnG H
$strnnH R
]nnR S
;nnS T
returnoo 
	inmueblesoo 
;oo 
}pp 	
}tt 
}ww …h
;D:\calidad\HousesPeru\HousesPeru\services\UsuarioService.cs
	namespace 	

HousesPeru
 
. 
services 
{ 
public 

	interface 
IUsuarioService $
{ 
Usuario 
GetUsuarioByID 
( 
int "
?" #
	IdUsuario$ -
)- .
;. /
IEnumerable 
< 
Usuario 
> 
GetUsuarios (
(( )
)) *
;* +
IEnumerable 
< 
Usuario 
> 

GetAgentes '
(' (
)( )
;) *
IEnumerable 
< 
Usuario 
> 
GetAllUsers (
(( )
)) *
;* +
Usuario (
GetUsuarioByEmailAndPassword ,
(, -
string- 3
correo4 :
,: ;
string< B
claveC H
)H I
;I J
void 

AddUsuario 
( 
UsuarioViewModel (
uservm) /
)/ 0
;0 1
void 
AddUsuarioAgente 
( 
UsuarioViewModel .
uservm/ 5
)5 6
;6 7
void 
EditarUsuario 
( 
int 
idUser %
,% &
Usuario' .
user/ 3
)3 4
;4 5
} 
} 
public 

class 
UsuarioService 
:  !
IUsuarioService" 1
{ 
private 
readonly 
HousesInPeruContext ,
_db- 0
;0 1
public 
UsuarioService 
( 
HousesInPeruContext 1
db2 4
)4 5
{6 7
this 
. 
_db 
= 
db 
; 
} 	
public!! 

void!! 

AddUsuario!! 
(!! 
UsuarioViewModel!! +
uservm!!, 2
)!!2 3
{"" 
var'' 
dat'' 
='' 
$str'' 
;'' 
var(( 
plan(( 
=(( 
_db(( 
.(( 
Plans(( 
.(( 
Where(( "
(((" #
x((# $
=>((% '
x((( )
.(() *
Nombre((* 0
==((1 3
$str((4 <
)((< =
.((= >
FirstOrDefault((> L
(((L M
)((M N
;((N O
Usuario)) 
user)) 
=)) 
new)) 
Usuario)) "
())" #
)))# $
;))$ %
user** 
.** 
Nombre** 
=** 
uservm** 
.** 
Nombre** #
;**# $
user++ 
.++ 
	ApellidoP++ 
=++ 
uservm++ 
.++  
	ApellidoP++  )
;++) *
user,, 
.,, 
	ApellidoM,, 
=,, 
uservm,, 
.,,  
	ApellidoM,,  )
;,,) *
user-- 
.-- 
Email-- 
=-- 
uservm-- 
.-- 
Email-- !
;--! "
user.. 
... 
Password.. 
=.. 
uservm.. 
... 
Password.. '
;..' (
user// 
.// 
FechaNacimiento// 
=// 
Convert// &
.//& '

ToDateTime//' 1
(//1 2
dat//2 5
.//5 6
ToString//6 >
(//> ?
)//? @
)//@ A
;//A B
user00 
.00 
Sexo00 
=00 
null00 
;00 
user11 
.11 
TipoUsuario11 
=11 
$str11 $
;11$ %
user22 
.22 
FechaRegistro22 
=22 
DateTime22 %
.22% &
Now22& )
;22) *
user33 
.33 
PlanId33 
=33 
plan33 
.33 
Id33 
;33 
user44 
.44 
FechaInicioPlan44 
=44 
user44 #
.44# $
FechaRegistro44$ 1
;441 2
user55 
.55 
FechaFinPlan55 
=55 
user55  
.55  !
FechaInicioPlan55! 0
.550 1
	AddMonths551 :
(55: ;
$num55; <
)55< =
;55= >
_db99 
.99 
Usuarios99 
.99 
Add99 
(99 
user99 
)99 
;99 
_db:: 
.:: 
SaveChanges:: 
(:: 
):: 
;:: 
}<< 
public== 

void== 
AddUsuarioAgente==  
(==  !
UsuarioViewModel==! 1
uservm==2 8
)==8 9
{>> 
var?? 
plan?? 
=?? 
_db?? 
.?? 
Plans?? 
.?? 
Where?? "
(??" #
x??# $
=>??% '
x??( )
.??) *
Nombre??* 0
==??1 3
$str??4 :
)??: ;
.??; <
FirstOrDefault??< J
(??J K
)??K L
;??L M
Usuario@@ 
user@@ 
=@@ 
new@@ 
Usuario@@ "
(@@" #
)@@# $
;@@$ %
varAA 
datAA 
=AA 
$strAA 
;AA 
userBB 
.BB 
NombreBB 
=BB 
uservmBB 
.BB 
NombreBB #
;BB# $
userCC 
.CC 
	ApellidoPCC 
=CC 
uservmCC 
.CC  
	ApellidoPCC  )
;CC) *
userDD 
.DD 
	ApellidoMDD 
=DD 
uservmDD 
.DD  
	ApellidoMDD  )
;DD) *
userEE 
.EE 
EmailEE 
=EE 
uservmEE 
.EE 
EmailEE !
;EE! "
userFF 
.FF 
PasswordFF 
=FF 
uservmFF 
.FF 
PasswordFF '
;FF' (
userGG 
.GG 
FechaNacimientoGG 
=GG 
ConvertGG &
.GG& '

ToDateTimeGG' 1
(GG1 2
datGG2 5
.GG5 6
ToStringGG6 >
(GG> ?
)GG? @
)GG@ A
;GGA B
userHH 
.HH 
SexoHH 
=HH 
nullHH 
;HH 
userII 
.II 
TipoUsuarioII 
=II 
$strII #
;II# $
userJJ 
.JJ 
FechaRegistroJJ 
=JJ 
DateTimeJJ %
.JJ% &
NowJJ& )
;JJ) *
userKK 
.KK 
PlanIdKK 
=KK 
planKK 
.KK 
IdKK 
;KK 
userLL 
.LL 
FechaInicioPlanLL 
=LL 
userLL #
.LL# $
FechaRegistroLL$ 1
;LL1 2
userMM 
.MM 
FechaFinPlanMM 
=MM 
userMM  
.MM  !
FechaInicioPlanMM! 0
.MM0 1
AddYearsMM1 9
(MM9 :
$numMM: <
)MM< =
;MM= >
_dbPP 
.PP 
UsuariosPP 
.PP 
AddPP 
(PP 
userPP 
)PP 
;PP 
_dbQQ 
.QQ 
SaveChangesQQ 
(QQ 
)QQ 
;QQ 
}SS 
publicUU 

UsuarioUU (
GetUsuarioByEmailAndPasswordUU /
(UU/ 0
stringUU0 6
correoUU7 =
,UU= >
stringUU? E
claveUUF K
)UUK L
{VV 	
UsuarioWW 
userWW 
=WW 
_dbWW 
.WW 
UsuariosWW '
.WW' (
WhereWW( -
(WW- .
uWW. /
=>WW0 2
uWW3 4
.WW4 5
EmailWW5 :
==WW; =
correoWW> D
)WWD E
.WWE F
FirstOrDefaultWWF T
(WWT U
)WWU V
;WWV W
ifXX 
(XX 
userXX 
==XX 
nullXX 
)XX 
{XX 
returnXX  &
nullXX' +
;XX+ ,
}XX- .
ifYY 

(YY 
userYY 
.YY 
EmailYY 
==YY 
correoYY  
||YY! #
userYY$ (
.YY( )
PasswordYY) 1
==YY2 4
claveYY5 :
)YY: ;
{YY< =
returnZZ 
userZZ 
;ZZ 
}[[ 	
return\\ 
null\\ 
;\\ 
}]] 	
public^^ 

Usuario^^ 
GetUsuarioByID^^ !
(^^! "
int^^" %
?^^% &
	IdUsuario^^' 0
)^^0 1
{^^2 3
if__ 
(__ 
	IdUsuario__ 
==__ 
null__ !
)__! "
return`` 
null`` 
;`` 
Usuarioaa 
usuarioaa 
=aa 
_dbaa !
.aa! "
Usuariosaa" *
.aa* +
Whereaa+ 0
(aa0 1
uaa1 2
=>aa3 5
uaa6 7
.aa7 8
	UsuarioIdaa8 A
==aaB D
	IdUsuarioaaE N
)aaN O
.aaO P
FirstOrDefaultaaP ^
(aa^ _
)aa_ `
;aa` a
returnbb 
usuariobb 
;bb 
}cc 	
publicee 

IEnumerableee 
<ee 
Usuarioee 
>ee 
GetUsuariosee  +
(ee+ ,
)ee, -
{ff 	
varmm 
usersmm 
=mm 
newmm 
Listmm 
<mm 
Usuariomm $
>mm$ %
(mm% &
)mm& '
;mm' (
usersoo 
=oo 
_dboo 
.oo 
Usuariosoo 
.oo 
Includeoo $
(oo$ %
xoo% &
=>oo' )
xoo* +
.oo+ ,
Planoo, 0
)oo0 1
.oo1 2
Whereoo2 7
(oo7 8
doo8 9
=>oo: <
doo= >
.oo> ?
TipoUsuariooo? J
==ooK M
$strooN W
)ooW X
.ooX Y
ToListooY _
(oo_ `
)oo` a
;oob c
returnpp 
userspp 
;pp 
}ss 
publictt 

IEnumerablett 
<tt 
Usuariott 
>tt 

GetAgentestt  *
(tt* +
)tt+ ,
{tt- .
varuu 
usersuu 
=uu 
_dbuu 
.uu 
Usuariosuu  
.uu  !
Whereuu! &
(uu& '
uuu' (
=>uu) +
uuu, -
.uu- .
TipoUsuariouu. 9
==uu: <
$struu= E
)uuE F
.uuF G
ToListuuG M
(uuM N
)uuN O
;uuO P
returnvv 
usersvv 
;vv 
}ww 
publicyy 

IEnumerableyy 
<yy 
Usuarioyy 
>yy 
GetAllUsersyy  +
(yy+ ,
)yy, -
{zz 
return{{ 
_db{{ 
.{{ 
Usuarios{{ 
.{{ 
ToList{{ "
({{" #
){{# $
;{{$ %
}|| 
public~~ 

void~~ 
EditarUsuario~~ 
(~~ 
int~~ !
idUser~~" (
,~~( )
Usuario~~* 1
user~~2 6
)~~6 7
{ 
var
ÄÄ 
temp
ÄÄ 
=
ÄÄ 
_db
ÄÄ 
.
ÄÄ 
Usuarios
ÄÄ 
.
ÄÄ  
Where
ÄÄ  %
(
ÄÄ% &
x
ÄÄ& '
=>
ÄÄ( *
x
ÄÄ+ ,
.
ÄÄ, -
	UsuarioId
ÄÄ- 6
==
ÄÄ7 9
idUser
ÄÄ: @
)
ÄÄ@ A
.
ÄÄA B
FirstOrDefault
ÄÄB P
(
ÄÄP Q
)
ÄÄQ R
;
ÄÄR S
temp
ÅÅ 
.
ÅÅ 
Nombre
ÅÅ 
=
ÅÅ 
user
ÅÅ 
.
ÅÅ 
Nombre
ÅÅ !
;
ÅÅ! "
temp
ÇÇ 
.
ÇÇ 
	ApellidoP
ÇÇ 
=
ÇÇ 
user
ÇÇ 
.
ÇÇ 
	ApellidoP
ÇÇ '
;
ÇÇ' (
temp
ÉÉ 
.
ÉÉ 
	ApellidoM
ÉÉ 
=
ÉÉ 
user
ÉÉ 
.
ÉÉ 
	ApellidoM
ÉÉ '
;
ÉÉ' (
temp
ÑÑ 
.
ÑÑ 
Email
ÑÑ 
=
ÑÑ 
user
ÑÑ 
.
ÑÑ 
Email
ÑÑ 
;
ÑÑ  
temp
ÖÖ 
.
ÖÖ 
FechaNacimiento
ÖÖ 
=
ÖÖ 
user
ÖÖ #
.
ÖÖ# $
FechaNacimiento
ÖÖ$ 3
;
ÖÖ3 4
temp
ÜÜ 
.
ÜÜ 
Sexo
ÜÜ 
=
ÜÜ 
user
ÜÜ 
.
ÜÜ 
Sexo
ÜÜ 
;
ÜÜ 
temp
áá 
.
áá 
ImagenPerfil
áá 
=
áá 
user
áá  
.
áá  !
ImagenPerfil
áá! -
;
áá- .
_db
àà 
.
àà 
SaveChanges
àà 
(
àà 
)
àà 
;
àà 
}
ää 
}ãã ÖQ
CD:\calidad\HousesPeru\HousesPeru\validaciones\ValidacionInmueble.cs
	namespace

 	

HousesPeru


 
.

 
validaciones

 !
{ 
public 

	interface 
IValidacionInmueble (
{ 
void 
validarInmueble 
( 
Inmueble %
inmueble& .
,. / 
ModelStateDictionary0 D

modelStateE O
)O P
;P Q
} 
public 

class 
ValidacionInmueble #
:# $
IValidacionInmueble$ 7
{ 
private 
readonly 
HousesInPeruContext ,
db- /
;/ 0
public 
ValidacionInmueble !
(! "
)" #
{$ %
} 	
public 
void 
validarInmueble #
(# $
Inmueble$ ,
inmueble- 5
,5 6 
ModelStateDictionary7 K

modelStateL V
)V W
{ 	

modelState 
. 
Clear 
( 
) 
; 
string 
LetrasRegex 
=  
$str! 1
;1 2
string 
NumerosRegex 
=  !
$str" 3
;3 4
string 

EmailRegex 
= 
$str	  ¡
;
¡ ¬
if 
( 
string 
. 
IsNullOrEmpty $
($ %
inmueble% -
.- .
	NombreInm. 7
)7 8
)8 9

modelState 
. 
AddModelError (
(( )
$str) 1
,1 2
$str3 T
)T U
;U V
if 
( 
string 
. 
IsNullOrEmpty $
($ %
inmueble% -
.- .
	NombreInm. 7
)7 8
||9 ;
inmueble< D
.D E
	NombreInmE N
.N O
LengthO U
<=V X
$numY Z
)Z [

modelState   
.   
AddModelError   (
(  ( )
$str  ) 1
,  1 2
$str  3 Y
)  Y Z
;  Z [
if!! 
(!! 
string!! 
.!! 
IsNullOrEmpty!! $
(!!$ %
inmueble!!% -
.!!- .
	NombreInm!!. 7
)!!7 8
||!!9 ;
inmueble!!< D
.!!D E
	NombreInm!!E N
.!!N O
Length!!O U
>!!V W
$num!!X Z
)!!Z [

modelState"" 
."" 
AddModelError"" (
(""( )
$str"") 1
,""1 2
$str""3 X
)""X Y
;""Y Z
bool## 
isNombreValid## 
=##  
string##! '
.##' (
IsNullOrEmpty##( 5
(##5 6
inmueble##6 >
.##> ?
	NombreInm##? H
)##H I
||##J L
Regex##M R
.##R S
IsMatch##S Z
(##Z [
inmueble##[ c
.##c d
	NombreInm##d m
,##m n
LetrasRegex##o z
)##z {
;##{ |
if$$ 
($$ 
!$$ 
isNombreValid$$ 
)$$ 

modelState%% 
.%% 
AddModelError%% (
(%%( )
$str%%) 1
,%%1 2
$str%%3 K
)%%K L
;%%L M
if'' 
('' 
string'' 
.'' 
IsNullOrEmpty'' $
(''$ %
inmueble''% -
.''- .
Descripcion''. 9
)''9 :
)'': ;

modelState(( 
.(( 
AddModelError(( (
(((( )
$str(() 6
,((6 7
$str((8 X
)((X Y
;((Y Z
if)) 
()) 
string)) 
.)) 
IsNullOrEmpty)) $
())$ %
inmueble))% -
.))- .
Descripcion)). 9
)))9 :
||)); =
inmueble))> F
.))F G
Descripcion))G R
.))R S
Length))S Y
<=))Z \
$num))] ^
)))^ _

modelState** 
.** 
AddModelError** (
(**( )
$str**) 6
,**6 7
$str**8 ^
)**^ _
;**_ `
if++ 
(++ 
string++ 
.++ 
IsNullOrEmpty++ $
(++$ %
inmueble++% -
.++- .
Descripcion++. 9
)++9 :
||++; =
inmueble++> F
.++F G
Descripcion++G R
.++R S
Length++S Y
>++Z [
$num++\ _
)++_ `

modelState,, 
.,, 
AddModelError,, (
(,,( )
$str,,) 6
,,,6 7
$str,,8 ^
),,^ _
;,,_ `
if// 
(// 
string// 
.// 
IsNullOrEmpty// $
(//$ %
inmueble//% -
.//- .
UbicacionInm//. :
)//: ;
)//; <

modelState00 
.00 
AddModelError00 (
(00( )
$str00) 7
,007 8
$str009 W
)00W X
;00X Y
if11 
(11 
string11 
.11 
IsNullOrEmpty11 $
(11$ %
inmueble11% -
.11- .
UbicacionInm11. :
)11: ;
||11< >
inmueble11? G
.11G H
UbicacionInm11H T
.11T U
Length11U [
<=11\ ^
$num11_ `
)11` a

modelState22 
.22 
AddModelError22 (
(22( )
$str22) 7
,227 8
$str229 _
)22_ `
;22` a
if33 
(33 
string33 
.33 
IsNullOrEmpty33 $
(33$ %
inmueble33% -
.33- .
UbicacionInm33. :
)33: ;
||33< >
inmueble33? G
.33G H
UbicacionInm33H T
.33T U
Length33U [
>33\ ]
$num33] `
)33` a

modelState44 
.44 
AddModelError44 (
(44( )
$str44) 7
,447 8
$str449 _
)44_ `
;44` a
if77 
(77 
string77 
.77 
IsNullOrEmpty77 $
(77$ %
inmueble77% -
.77- .

NumCelular77. 8
)778 9
)779 :

modelState88 
.88 
AddModelError88 (
(88( )
$str88) 3
,883 4
$str885 \
)88\ ]
;88] ^
if99 
(99 
string99 
.99 
IsNullOrEmpty99 $
(99$ %
inmueble99% -
.99- .

NumCelular99. 8
)998 9
||99: <
inmueble99= E
.99E F

NumCelular99F P
.99P Q
Length99Q W
<=99X Z
$num99[ \
)99\ ]

modelState:: 
.:: 
AddModelError:: (
(::( )
$str::) 3
,::3 4
$str::5 [
)::[ \
;::\ ]
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; $
(;;$ %
inmueble;;% -
.;;- .

NumCelular;;. 8
);;8 9
||;;: <
inmueble;;= E
.;;E F

NumCelular;;F P
.;;P Q
Length;;Q W
>;;X Y
$num;;Z [
);;[ \

modelState<< 
.<< 
AddModelError<< (
(<<( )
$str<<) 3
,<<3 4
$str<<5 Y
)<<Y Z
;<<Z [
bool== 
isTelefonoValid==  
===! "
string==# )
.==) *
IsNullOrEmpty==* 7
(==7 8
inmueble==8 @
.==@ A

NumCelular==A K
)==K L
||==M O
Regex==P U
.==U V
IsMatch==V ]
(==] ^
inmueble==^ f
.==f g

NumCelular==g q
,==q r
NumerosRegex==s 
)	== Ä
;
==Ä Å
if>> 
(>> 
!>> 
isTelefonoValid>>  
)>>  !

modelState?? 
.?? 
AddModelError?? (
(??( )
$str??) 3
,??3 4
$str??5 N
)??N O
;??O P
ifAA 
(AA 
!AA 
stringAA 
.AA 
IsNullOrEmptyAA %
(AA% &
inmuebleAA& .
.AA. /
AreaAA/ 3
)AA3 4
)AA4 5
{AA6 7
ifBB 
(BB 
inmuebleBB 
.BB 
AreaBB !
.BB! "
LengthBB" (
>BB) *
$numBB+ -
)BB- .

modelStateCC 
.CC 
AddModelErrorCC ,
(CC, -
$strCC- 3
,CC3 4
$strCC5 Z
)CCZ [
;CC[ \
boolDD 
isAreaValidDD  
=DD! "
RegexDD# (
.DD( )
IsMatchDD) 0
(DD0 1
inmuebleDD1 9
.DD9 :
AreaDD: >
,DD> ?
NumerosRegexDD@ L
)DDL M
;DDM N
ifEE 
(EE 
!EE 
isAreaValidEE  
)EE  !

modelStateFF 
.FF 
AddModelErrorFF ,
(FF, -
$strFF- 3
,FF3 4
$strFF5 N
)FFN O
;FFO P
}GG 
ifJJ 
(JJ 
inmuebleJJ 
.JJ 
InmuebleTipoIdJJ '
==JJ( *
$numJJ+ ,
)JJ, -

modelStateKK 
.KK 
AddModelErrorKK (
(KK( )
$strKK) 7
,KK7 8
$strKK9 X
)KKX Y
;KKY Z
ifLL 
(LL 
inmuebleLL 
.LL 
CiudadIdLL !
==LL" $
$numLL% &
)LL& '

modelStateMM 
.MM 
AddModelErrorMM (
(MM( )
$strMM) 1
,MM1 2
$strMM3 L
)MML M
;MMM N
ifOO 
(OO 
inmuebleOO 
.OO 
MonedaOO 
==OO  "
$strOO# &
)OO& '
{PP 

modelStateQQ 
.QQ 
AddModelErrorQQ (
(QQ( )
$strQQ) 1
,QQ1 2
$strQQ3 R
)QQR S
;QQS T
}RR 
}TT 	
}UU 
}XX Èú
BD:\calidad\HousesPeru\HousesPeru\validaciones\ValidacionUsuario.cs
	namespace 	

HousesPeru
 
. 
validaciones !
{ 
public 

	interface 
IValidacionUsuario '
{ 
void 
validarUsuario 
( 
UsuarioViewModel ,
user- 1
,1 2 
ModelStateDictionary3 G

modelStateH R
)R S
;S T
void 
valUsr 
( 
Usuario 
user  
,  ! 
ModelStateDictionary" 6

modelState7 A
)A B
;B C
} 
public 

class 
ValidacionUsuario "
:# $
IValidacionUsuario% 7
{ 
private 
readonly 
HousesInPeruContext ,
db- /
;/ 0
public 
ValidacionUsuario  
(  !
HousesInPeruContext! 4
db5 7
)7 8
{ 	
this 
. 
db 
= 
db 
; 
} 	
public 
void 
validarUsuario "
(" #
UsuarioViewModel# 3
user4 8
,8 9 
ModelStateDictionary: N

modelStateO Y
)Y Z
{ 	

modelState 
. 
Clear 
( 
) 
; 
string 
LetrasRegex 
=  
$str! 1
;1 2
string 
NumerosRegex 
=  !
$str" 3
;3 4
string   

EmailRegex   
=   
$str	    ¡
;
  ¡ ¬
if!! 
(!! 
string!! 
.!! 
IsNullOrEmpty!! $
(!!$ %
user!!% )
.!!) *
Nombre!!* 0
)!!0 1
)!!1 2

modelState"" 
."" 
AddModelError"" (
(""( )
$str"") 1
,""1 2
$str""3 T
)""T U
;""U V
if## 
(## 
string## 
.## 
IsNullOrEmpty## $
(##$ %
user##% )
.##) *
Nombre##* 0
)##0 1
||##2 4
user##5 9
.##9 :
Nombre##: @
.##@ A
Length##A G
<=##H J
$num##K L
)##L M

modelState$$ 
.$$ 
AddModelError$$ (
($$( )
$str$$) 1
,$$1 2
$str$$3 Y
)$$Y Z
;$$Z [
if%% 
(%% 
string%% 
.%% 
IsNullOrEmpty%% $
(%%$ %
user%%% )
.%%) *
Nombre%%* 0
)%%0 1
||%%2 4
user%%5 9
.%%9 :
Nombre%%: @
.%%@ A
Length%%A G
>%%H I
$num%%J M
)%%M N

modelState&& 
.&& 
AddModelError&& (
(&&( )
$str&&) 1
,&&1 2
$str&&3 Y
)&&Y Z
;&&Z [
bool'' 
isNombreValid'' 
=''  
string''! '
.''' (
IsNullOrEmpty''( 5
(''5 6
user''6 :
.'': ;
Nombre''; A
)''A B
||''C E
Regex''F K
.''K L
IsMatch''L S
(''S T
user''T X
.''X Y
Nombre''Y _
,''_ `
LetrasRegex''a l
)''l m
;''m n
if(( 
((( 
!(( 
isNombreValid(( 
)(( 

modelState)) 
.)) 
AddModelError)) (
())( )
$str))) 1
,))1 2
$str))3 K
)))K L
;))L M
if++ 
(++ 
string++ 
.++ 
IsNullOrEmpty++ $
(++$ %
user++% )
.++) *
	ApellidoP++* 3
)++3 4
)++4 5

modelState,, 
.,, 
AddModelError,, (
(,,( )
$str,,) 4
,,,4 5
$str,,6 [
),,[ \
;,,\ ]
if-- 
(-- 
string-- 
.-- 
IsNullOrEmpty-- $
(--$ %
user--% )
.--) *
	ApellidoP--* 3
)--3 4
||--5 7
user--8 <
.--< =
	ApellidoP--= F
.--F G
Length--G M
<=--N P
$num--Q R
)--R S

modelState.. 
... 
AddModelError.. (
(..( )
$str..) 4
,..4 5
$str..6 \
)..\ ]
;..] ^
if// 
(// 
string// 
.// 
IsNullOrEmpty// $
(//$ %
user//% )
.//) *
	ApellidoP//* 3
)//3 4
||//5 7
user//8 <
.//< =
	ApellidoP//= F
.//F G
Length//G M
>//N O
$num//P S
)//S T

modelState00 
.00 
AddModelError00 (
(00( )
$str00) 4
,004 5
$str006 \
)00\ ]
;00] ^
bool11 
isApellidoPValid11 !
=11" #
string11$ *
.11* +
IsNullOrEmpty11+ 8
(118 9
user119 =
.11= >
	ApellidoP11> G
)11G H
||11I K
Regex11L Q
.11Q R
IsMatch11R Y
(11Y Z
user11Z ^
.11^ _
	ApellidoP11_ h
,11h i
LetrasRegex11j u
)11u v
;11v w
if22 
(22 
!22 
isApellidoPValid22 !
)22! "

modelState33 
.33 
AddModelError33 (
(33( )
$str33) 4
,334 5
$str336 N
)33N O
;33O P
if55 
(55 
string55 
.55 
IsNullOrEmpty55 $
(55$ %
user55% )
.55) *
	ApellidoM55* 3
)553 4
)554 5

modelState66 
.66 
AddModelError66 (
(66( )
$str66) 4
,664 5
$str666 \
)66\ ]
;66] ^
if77 
(77 
string77 
.77 
IsNullOrEmpty77 $
(77$ %
user77% )
.77) *
	ApellidoM77* 3
)773 4
||775 7
user778 <
.77< =
	ApellidoM77= F
.77F G
Length77G M
<=77N P
$num77Q R
)77R S

modelState88 
.88 
AddModelError88 (
(88( )
$str88) 4
,884 5
$str886 \
)88\ ]
;88] ^
if99 
(99 
string99 
.99 
IsNullOrEmpty99 $
(99$ %
user99% )
.99) *
	ApellidoM99* 3
)993 4
||995 7
user998 <
.99< =
	ApellidoM99= F
.99F G
Length99G M
>99N O
$num99P S
)99S T

modelState:: 
.:: 
AddModelError:: (
(::( )
$str::) 4
,::4 5
$str::6 \
)::\ ]
;::] ^
bool;; 
isApellidoMValid;; !
=;;" #
string;;$ *
.;;* +
IsNullOrEmpty;;+ 8
(;;8 9
user;;9 =
.;;= >
	ApellidoM;;> G
);;G H
||;;I K
Regex;;L Q
.;;Q R
IsMatch;;R Y
(;;Y Z
user;;Z ^
.;;^ _
	ApellidoM;;_ h
,;;h i
LetrasRegex;;j u
);;u v
;;;v w
if<< 
(<< 
!<< 
isApellidoPValid<< !
)<<! "

modelState== 
.== 
AddModelError== (
(==( )
$str==) 4
,==4 5
$str==6 N
)==N O
;==O P
if?? 
(?? 
string?? 
.?? 
IsNullOrEmpty?? $
(??$ %
user??% )
.??) *
Email??* /
)??/ 0
)??0 1

modelState@@ 
.@@ 
AddModelError@@ (
(@@( )
$str@@) 0
,@@0 1
$str@@2 L
)@@L M
;@@M N
ifAA 
(AA 
stringAA 
.AA 
IsNullOrEmptyAA $
(AA$ %
userAA% )
.AA) *
EmailAA* /
)AA/ 0
||AA1 3
userAA4 8
.AA8 9
EmailAA9 >
.AA> ?
LengthAA? E
<=AAF H
$numAAI J
)AAJ K

modelStateBB 
.BB 
AddModelErrorBB (
(BB( )
$strBB) 0
,BB0 1
$strBB2 X
)BBX Y
;BBY Z
ifCC 
(CC 
stringCC 
.CC 
IsNullOrEmptyCC $
(CC$ %
userCC% )
.CC) *
EmailCC* /
)CC/ 0
||CC1 3
userCC4 8
.CC8 9
EmailCC9 >
.CC> ?
LengthCC? E
>CCF G
$numCCH K
)CCK L

modelStateDD 
.DD 
AddModelErrorDD (
(DD( )
$strDD) 0
,DD0 1
$strDD2 X
)DDX Y
;DDY Z
boolEE 
isEmailValidEE 
=EE 
stringEE  &
.EE& '
IsNullOrEmptyEE' 4
(EE4 5
userEE5 9
.EE9 :
EmailEE: ?
)EE? @
||EEA C
RegexEED I
.EEI J
IsMatchEEJ Q
(EEQ R
userEER V
.EEV W
EmailEEW \
,EE\ ]

EmailRegexEE^ h
)EEh i
;EEi j
ifFF 
(FF 
!FF 
isEmailValidFF 
)FF 

modelStateGG 
.GG 
AddModelErrorGG (
(GG( )
$strGG) 0
,GG0 1
$strGG2 N
)GGN O
;GGO P
ifHH 
(HH 
existeUserCHH 
(HH 
userHH  
.HH  !
EmailHH! &
)HH& '
)HH' (

modelStateII 
.II 
AddModelErrorII (
(II( )
$strII) 0
,II0 1
$strII1 Z
)IIZ [
;II[ \
ifKK 
(KK 
stringKK 
.KK 
IsNullOrEmptyKK $
(KK$ %
userKK% )
.KK) *
PasswordKK* 2
)KK2 3
)KK3 4

modelStateLL 
.LL 
AddModelErrorLL (
(LL( )
$strLL) 3
,LL3 4
$strLL5 T
)LLT U
;LLU V
}NN 	
publicOO 
boolOO 
existeUserCOO 
(OO  
stringOO  &
emailOO' ,
)OO, -
{PP 	
varQQ 
usrsQQ 
=QQ 
dbQQ 
.QQ 
UsuariosQQ "
.QQ" #
WhereQQ# (
(QQ( )
xQQ) *
=>QQ* ,
xQQ, -
.QQ- .
EmailQQ. 3
==QQ3 5
emailQQ6 ;
)QQ; <
.QQ< =
FirstOrDefaultQQ= K
(QQK L
)QQL M
;QQM N
ifSS 
(SS 
usrsSS 
!=SS 
nullSS 
)SS 
{TT 
returnUU 
trueUU 
;UU 
}VV 
returnVV 
falseVV 
;VV 
}YY 	
public[[ 
void[[ 
valUsr[[ 
([[ 
Usuario[[ "
user[[# '
,[[' ( 
ModelStateDictionary[[) =

modelState[[> H
)[[H I
{\\ 	

modelState]] 
.]] 
Clear]] 
(]] 
)]] 
;]] 
string^^ 
LetrasRegex^^ 
=^^  
$str^^! 1
;^^1 2
string`` 

EmailRegex`` 
=`` 
$str	``  ¡
;
``¡ ¬
ifaa 
(aa 
stringaa 
.aa 
IsNullOrEmptyaa $
(aa$ %
useraa% )
.aa) *
Nombreaa* 0
)aa0 1
)aa1 2

modelStatebb 
.bb 
AddModelErrorbb (
(bb( )
$strbb) 1
,bb1 2
$strbb3 T
)bbT U
;bbU V
ifcc 
(cc 
stringcc 
.cc 
IsNullOrEmptycc $
(cc$ %
usercc% )
.cc) *
Nombrecc* 0
)cc0 1
||cc2 4
usercc5 9
.cc9 :
Nombrecc: @
.cc@ A
LengthccA G
<=ccH J
$numccK L
)ccL M

modelStatedd 
.dd 
AddModelErrordd (
(dd( )
$strdd) 1
,dd1 2
$strdd3 Y
)ddY Z
;ddZ [
ifee 
(ee 
stringee 
.ee 
IsNullOrEmptyee $
(ee$ %
useree% )
.ee) *
Nombreee* 0
)ee0 1
||ee2 4
useree5 9
.ee9 :
Nombreee: @
.ee@ A
LengtheeA G
>eeH I
$numeeJ M
)eeM N

modelStateff 
.ff 
AddModelErrorff (
(ff( )
$strff) 1
,ff1 2
$strff3 Y
)ffY Z
;ffZ [
boolgg 
isNombreValidgg 
=gg  
stringgg! '
.gg' (
IsNullOrEmptygg( 5
(gg5 6
usergg6 :
.gg: ;
Nombregg; A
)ggA B
||ggC E
RegexggF K
.ggK L
IsMatchggL S
(ggS T
userggT X
.ggX Y
NombreggY _
,gg_ `
LetrasRegexgga l
)ggl m
;ggm n
ifhh 
(hh 
!hh 
isNombreValidhh 
)hh 

modelStateii 
.ii 
AddModelErrorii (
(ii( )
$strii) 1
,ii1 2
$strii3 K
)iiK L
;iiL M
ifkk 
(kk 
stringkk 
.kk 
IsNullOrEmptykk $
(kk$ %
userkk% )
.kk) *
	ApellidoPkk* 3
)kk3 4
)kk4 5

modelStatell 
.ll 
AddModelErrorll (
(ll( )
$strll) 4
,ll4 5
$strll6 [
)ll[ \
;ll\ ]
ifmm 
(mm 
stringmm 
.mm 
IsNullOrEmptymm $
(mm$ %
usermm% )
.mm) *
	ApellidoPmm* 3
)mm3 4
||mm5 7
usermm8 <
.mm< =
	ApellidoPmm= F
.mmF G
LengthmmG M
<=mmN P
$nummmQ R
)mmR S

modelStatenn 
.nn 
AddModelErrornn (
(nn( )
$strnn) 4
,nn4 5
$strnn6 \
)nn\ ]
;nn] ^
ifoo 
(oo 
stringoo 
.oo 
IsNullOrEmptyoo $
(oo$ %
useroo% )
.oo) *
	ApellidoPoo* 3
)oo3 4
||oo5 7
useroo8 <
.oo< =
	ApellidoPoo= F
.ooF G
LengthooG M
>ooN O
$numooP S
)ooS T

modelStatepp 
.pp 
AddModelErrorpp (
(pp( )
$strpp) 4
,pp4 5
$strpp6 \
)pp\ ]
;pp] ^
boolqq 
isApellidoPValidqq !
=qq" #
stringqq$ *
.qq* +
IsNullOrEmptyqq+ 8
(qq8 9
userqq9 =
.qq= >
	ApellidoPqq> G
)qqG H
||qqI K
RegexqqL Q
.qqQ R
IsMatchqqR Y
(qqY Z
userqqZ ^
.qq^ _
	ApellidoPqq_ h
,qqh i
LetrasRegexqqj u
)qqu v
;qqv w
ifrr 
(rr 
!rr 
isApellidoPValidrr !
)rr! "

modelStatess 
.ss 
AddModelErrorss (
(ss( )
$strss) 4
,ss4 5
$strss6 N
)ssN O
;ssO P
ifuu 
(uu 
stringuu 
.uu 
IsNullOrEmptyuu $
(uu$ %
useruu% )
.uu) *
	ApellidoMuu* 3
)uu3 4
)uu4 5

modelStatevv 
.vv 
AddModelErrorvv (
(vv( )
$strvv) 4
,vv4 5
$strvv6 \
)vv\ ]
;vv] ^
ifww 
(ww 
stringww 
.ww 
IsNullOrEmptyww $
(ww$ %
userww% )
.ww) *
	ApellidoMww* 3
)ww3 4
||ww5 7
userww8 <
.ww< =
	ApellidoMww= F
.wwF G
LengthwwG M
<=wwN P
$numwwQ R
)wwR S

modelStatexx 
.xx 
AddModelErrorxx (
(xx( )
$strxx) 4
,xx4 5
$strxx6 \
)xx\ ]
;xx] ^
ifyy 
(yy 
stringyy 
.yy 
IsNullOrEmptyyy $
(yy$ %
useryy% )
.yy) *
	ApellidoMyy* 3
)yy3 4
||yy5 7
useryy8 <
.yy< =
	ApellidoMyy= F
.yyF G
LengthyyG M
>yyN O
$numyyP S
)yyS T

modelStatezz 
.zz 
AddModelErrorzz (
(zz( )
$strzz) 4
,zz4 5
$strzz6 \
)zz\ ]
;zz] ^
bool{{ 
isApellidoMValid{{ !
={{" #
string{{$ *
.{{* +
IsNullOrEmpty{{+ 8
({{8 9
user{{9 =
.{{= >
	ApellidoM{{> G
){{G H
||{{I K
Regex{{L Q
.{{Q R
IsMatch{{R Y
({{Y Z
user{{Z ^
.{{^ _
	ApellidoM{{_ h
,{{h i
LetrasRegex{{j u
){{u v
;{{v w
if|| 
(|| 
!|| 
isApellidoPValid|| !
)||! "

modelState}} 
.}} 
AddModelError}} (
(}}( )
$str}}) 4
,}}4 5
$str}}6 N
)}}N O
;}}O P
if 
( 
string 
. 
IsNullOrEmpty $
($ %
user% )
.) *
Email* /
)/ 0
)0 1

modelState
ÄÄ 
.
ÄÄ 
AddModelError
ÄÄ (
(
ÄÄ( )
$str
ÄÄ) 0
,
ÄÄ0 1
$str
ÄÄ2 L
)
ÄÄL M
;
ÄÄM N
if
ÅÅ 
(
ÅÅ 
string
ÅÅ 
.
ÅÅ 
IsNullOrEmpty
ÅÅ $
(
ÅÅ$ %
user
ÅÅ% )
.
ÅÅ) *
Email
ÅÅ* /
)
ÅÅ/ 0
||
ÅÅ1 3
user
ÅÅ4 8
.
ÅÅ8 9
Email
ÅÅ9 >
.
ÅÅ> ?
Length
ÅÅ? E
<=
ÅÅF H
$num
ÅÅI J
)
ÅÅJ K

modelState
ÇÇ 
.
ÇÇ 
AddModelError
ÇÇ (
(
ÇÇ( )
$str
ÇÇ) 0
,
ÇÇ0 1
$str
ÇÇ2 X
)
ÇÇX Y
;
ÇÇY Z
if
ÉÉ 
(
ÉÉ 
string
ÉÉ 
.
ÉÉ 
IsNullOrEmpty
ÉÉ $
(
ÉÉ$ %
user
ÉÉ% )
.
ÉÉ) *
Email
ÉÉ* /
)
ÉÉ/ 0
||
ÉÉ1 3
user
ÉÉ4 8
.
ÉÉ8 9
Email
ÉÉ9 >
.
ÉÉ> ?
Length
ÉÉ? E
>
ÉÉF G
$num
ÉÉH K
)
ÉÉK L

modelState
ÑÑ 
.
ÑÑ 
AddModelError
ÑÑ (
(
ÑÑ( )
$str
ÑÑ) 0
,
ÑÑ0 1
$str
ÑÑ2 X
)
ÑÑX Y
;
ÑÑY Z
bool
ÖÖ 
isEmailValid
ÖÖ 
=
ÖÖ 
string
ÖÖ  &
.
ÖÖ& '
IsNullOrEmpty
ÖÖ' 4
(
ÖÖ4 5
user
ÖÖ5 9
.
ÖÖ9 :
Email
ÖÖ: ?
)
ÖÖ? @
||
ÖÖA C
Regex
ÖÖD I
.
ÖÖI J
IsMatch
ÖÖJ Q
(
ÖÖQ R
user
ÖÖR V
.
ÖÖV W
Email
ÖÖW \
,
ÖÖ\ ]

EmailRegex
ÖÖ^ h
)
ÖÖh i
;
ÖÖi j
if
ÜÜ 
(
ÜÜ 
!
ÜÜ 
isEmailValid
ÜÜ 
)
ÜÜ 

modelState
áá 
.
áá 
AddModelError
áá (
(
áá( )
$str
áá) 0
,
áá0 1
$str
áá2 N
)
ááN O
;
ááO P
}
åå 	
}
çç 
}êê œ
;D:\calidad\HousesPeru\HousesPeru\ViewModels\ImagenPrueba.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class 
ImagenPrueba 
{		 
public

 
int

 
ImagenPruebaId

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
HttpPostedFileBase !
Nombre" (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
} ≥
>D:\calidad\HousesPeru\HousesPeru\ViewModels\ImagenViewModel.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public		 

class		 
ImagenViewModel		  
{

 
public 
HttpPostedFileBase !
img" %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} µ
@D:\calidad\HousesPeru\HousesPeru\ViewModels\InmuebleViewModel.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class 
InmuebleViewModel "
{		 
public

 
string

 
	NombreInm

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
string 
Area 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumHabitaciones %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Pisos 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Piso 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
PrecioVentaInm $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
PrecioAlquilerInm '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
UbicacionInm "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
? 
FechaPublic $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
Boolean 
? 

EstaActivo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
HttpPostedFileBase !
img1" &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
HttpPostedFileBase !
img2" &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
HttpPostedFileBase !
img3" &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
HttpPostedFileBase !
img4" &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
HttpPostedFileBase !
img5" &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} —
9D:\calidad\HousesPeru\HousesPeru\ViewModels\JsonImagen.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class 

JsonImagen 
{		 
public

 
int

 
ImagenId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
string 
Img 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

InmuebleId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ™
<D:\calidad\HousesPeru\HousesPeru\ViewModels\PlanViewModel.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class 
PlanViewModel 
{		 
public 
DateTime 
FechaFin  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ©
CD:\calidad\HousesPeru\HousesPeru\ViewModels\PublicacionViewModel.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class  
PublicacionViewModel %
{		 
public 
string 
	NombreInm 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Area 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumHabitaciones %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Pisos 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Piso 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
PrecioVentaInm $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
PrecioAlquilerInm '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
UbicacionInm "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
? 
FechaPublic $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
CiudadInmueble $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
Boolean 
? 

EstaActivo "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} õ
?D:\calidad\HousesPeru\HousesPeru\ViewModels\UsuarioViewModel.cs
	namespace 	

HousesPeru
 
. 

ViewModels 
{ 
public 

class 
UsuarioViewModel !
{		 
public

 
string

 
Nombre

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
	ApellidoP 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
	ApellidoM 
{  !
get" %
;% &
set' *
;* +
}, -
public	 
string 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 